<!-- HTML header for doxygen 1.10.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DayZ: HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt; Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../custom.js"></script>
<script type="text/javascript">DoxygenAwesomeDarkModeToggle.init();DoxygenAwesomeParagraphLink.init();DoxygenAwesomeInteractiveToc.init();</script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../custom.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DayZ<span id="projectnumber">&#160;1.24</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d05/class_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="#pri-static-attribs">Static Private Attributes</a> &#124;
<a href="../../d6/d01/class_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt; Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="dynheader">
Collaboration diagram for HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;:</div>
<div class="dyncontent">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dc/d0e/class_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_0120335d175bf12c21b5f6ac690da3d7af.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:a6acb1bf76b6f43ce6107ab7b374c1ea3" id="r_a6acb1bf76b6f43ce6107ab7b374c1ea3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6acb1bf76b6f43ce6107ab7b374c1ea3">SetInternalID</a> (<a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="el" href="../../db/d06/class_param3.html">state</a>)</td></tr>
<tr class="memdesc:a6acb1bf76b6f43ce6107ab7b374c1ea3"><td class="mdescLeft">&#160;</td><td class="mdescRight">unique list of states in this machine (automation of save/load)  <br /></td></tr>
<tr class="separator:a6acb1bf76b6f43ce6107ab7b374c1ea3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39c6c17bbe295f0b340e09b9aa2e0370" id="r_a39c6c17bbe295f0b340e09b9aa2e0370"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">override</a> <a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a39c6c17bbe295f0b340e09b9aa2e0370">AddTransition</a> (<a class="el" href="../../d8/d01/class_f_s_m_transition.html">FSMTransition</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt; <a class="el" href="../../db/d06/class_param3.html">t</a>)</td></tr>
<tr class="memdesc:a39c6c17bbe295f0b340e09b9aa2e0370"><td class="mdescLeft">&#160;</td><td class="mdescRight">adds transition into transition table As a side effect registers the state(s) into m_UniqueStates  <br /></td></tr>
<tr class="separator:a39c6c17bbe295f0b340e09b9aa2e0370"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52d6672843d29dbfc54e35e918733eec" id="r_a52d6672843d29dbfc54e35e918733eec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a52d6672843d29dbfc54e35e918733eec">ProcessLocalTransition</a> (<a class="el" href="../../d8/d01/class_f_s_m_transition.html">FSMTransition</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt; <a class="el" href="../../db/d06/class_param3.html">t</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e</a>)</td></tr>
<tr class="separator:a52d6672843d29dbfc54e35e918733eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6087c6149c99c8507ecd05709f3ab78f" id="r_a6087c6149c99c8507ecd05709f3ab78f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6087c6149c99c8507ecd05709f3ab78f">ProcessAbortTransition</a> (<a class="el" href="../../d8/d01/class_f_s_m_transition.html">FSMTransition</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt; <a class="el" href="../../db/d06/class_param3.html">t</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e</a>)</td></tr>
<tr class="separator:a6087c6149c99c8507ecd05709f3ab78f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121dc2e835caf00f21e1150f7e03983b" id="r_a121dc2e835caf00f21e1150f7e03983b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">override</a> <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a121dc2e835caf00f21e1150f7e03983b">ProcessAbortEvent</a> (<a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e</a>, <a class="el" href="../../db/d06/class_param3.html">out</a> <a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="el" href="../../db/d06/class_param3.html">result</a>)</td></tr>
<tr class="separator:a121dc2e835caf00f21e1150f7e03983b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af05813a5075904a48a7444c3769e4f77" id="r_af05813a5075904a48a7444c3769e4f77"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">override</a> <a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#af05813a5075904a48a7444c3769e4f77">ProcessEvent</a> (<a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e</a>)</td></tr>
<tr class="separator:af05813a5075904a48a7444c3769e4f77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbad6d95dace65d55f3737d8d773a806" id="r_adbad6d95dace65d55f3737d8d773a806"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adbad6d95dace65d55f3737d8d773a806">FindStateForInternalID</a> (<a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../db/d06/class_param3.html">id</a>)</td></tr>
<tr class="memdesc:adbad6d95dace65d55f3737d8d773a806"><td class="mdescLeft">&#160;</td><td class="mdescRight">retrieve base state that matches given internal id  <br /></td></tr>
<tr class="separator:adbad6d95dace65d55f3737d8d773a806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5e58979a0005f2a048074474b41a9e2" id="r_ac5e58979a0005f2a048074474b41a9e2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac5e58979a0005f2a048074474b41a9e2">FindStableStateForID</a> (<a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../db/d06/class_param3.html">id</a>)</td></tr>
<tr class="memdesc:ac5e58979a0005f2a048074474b41a9e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">load from database - reverse lookup for state from saved id  <br /></td></tr>
<tr class="separator:ac5e58979a0005f2a048074474b41a9e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2892e2067f0b840835514bc82ab44ce7" id="r_a2892e2067f0b840835514bc82ab44ce7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2892e2067f0b840835514bc82ab44ce7">LoadAndSetCurrentFSMState</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#a4ff67286551fc6c18504752a277c8bc1">ParamsReadContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>, <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> version)</td></tr>
<tr class="separator:a2892e2067f0b840835514bc82ab44ce7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7764df4dff05076f74167b0ce50bdc43" id="r_a7764df4dff05076f74167b0ce50bdc43"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a7764df4dff05076f74167b0ce50bdc43">LoadCurrentFSMState</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#a4ff67286551fc6c18504752a277c8bc1">ParamsReadContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>, <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> version)</td></tr>
<tr class="memdesc:a7764df4dff05076f74167b0ce50bdc43"><td class="mdescLeft">&#160;</td><td class="mdescRight">load current state of fsm  <br /></td></tr>
<tr class="separator:a7764df4dff05076f74167b0ce50bdc43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a007b947e912d1e84eca73d5c8bd45901" id="r_a007b947e912d1e84eca73d5c8bd45901"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a007b947e912d1e84eca73d5c8bd45901">LoadCurrentUnstableFSMState</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>, <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> version)</td></tr>
<tr class="separator:a007b947e912d1e84eca73d5c8bd45901"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a547396c4dcbe758656386371d79b4163" id="r_a547396c4dcbe758656386371d79b4163"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a547396c4dcbe758656386371d79b4163">SaveCurrentFSMState</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>)</td></tr>
<tr class="memdesc:a547396c4dcbe758656386371d79b4163"><td class="mdescLeft">&#160;</td><td class="mdescRight">save current state of fsm  <br /></td></tr>
<tr class="separator:a547396c4dcbe758656386371d79b4163"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b9c22cee987009d8b509d91d72371a1" id="r_a2b9c22cee987009d8b509d91d72371a1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2b9c22cee987009d8b509d91d72371a1">SaveCurrentUnstableFSMState</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>)</td></tr>
<tr class="separator:a2b9c22cee987009d8b509d91d72371a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7d3938684ce733ea27a97ab89ef2ed9" id="r_ae7d3938684ce733ea27a97ab89ef2ed9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a> ()</td></tr>
<tr class="memdesc:ae7d3938684ce733ea27a97ab89ef2ed9"><td class="mdescLeft">&#160;</td><td class="mdescRight">validate the state of the gun and repair if mismatch  <br /></td></tr>
<tr class="separator:ae7d3938684ce733ea27a97ab89ef2ed9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47c5052caf7a6925483e8748a3503a07" id="r_a47c5052caf7a6925483e8748a3503a07"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a47c5052caf7a6925483e8748a3503a07">Internal_ValidateAndRepair</a> ()</td></tr>
<tr class="memdesc:a47c5052caf7a6925483e8748a3503a07"><td class="mdescLeft">&#160;</td><td class="mdescRight">validate the state of the gun and repair if mismatch  <br /></td></tr>
<tr class="separator:a47c5052caf7a6925483e8748a3503a07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5c87ce381136bf52b4bb20e3d7b7ba" id="r_a8a5c87ce381136bf52b4bb20e3d7b7ba"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a> (<a class="el" href="../../d3/d0c/class_weapon___base.html">Weapon_Base</a> <a class="el" href="../../db/d06/class_param3.html">weapon</a>, <a class="el" href="../../d5/d02/classstring.html">string</a> <a class="el" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">stateCondition</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">gunCondition</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e1</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e2</a>, <a class="el" href="../../db/d06/class_param3.html">out</a> <a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="el" href="../../db/d06/class_param3.html">state</a>)</td></tr>
<tr class="separator:a8a5c87ce381136bf52b4bb20e3d7b7ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e063b90cbfec70349d96917f43951e5" id="r_a1e063b90cbfec70349d96917f43951e5"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a1e063b90cbfec70349d96917f43951e5">OnFailThresholdBreached</a> (<a class="el" href="../../db/d05/class_weapon.html">Weapon</a> <a class="el" href="../../db/d06/class_param3.html">weapon</a>, <a class="el" href="../../d5/d02/classstring.html">string</a> <a class="el" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">stateCondition</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">gunCondition</a>)</td></tr>
<tr class="separator:a1e063b90cbfec70349d96917f43951e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae41ad037a9208e7839ddf051a82a8fd9" id="r_ae41ad037a9208e7839ddf051a82a8fd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ae41ad037a9208e7839ddf051a82a8fd9">ValidateAndRepairStateFinder</a> (<a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">condition</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e1</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="el" href="../../db/d06/class_param3.html">e2</a>, <a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="el" href="../../db/d06/class_param3.html">state</a>)</td></tr>
<tr class="separator:ae41ad037a9208e7839ddf051a82a8fd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a005969f642bf644c211097ef9c234859" id="r_a005969f642bf644c211097ef9c234859"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d09/classbool.html">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a005969f642bf644c211097ef9c234859">OnStoreLoad</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#a4ff67286551fc6c18504752a277c8bc1">ParamsReadContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>, <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> version)</td></tr>
<tr class="memdesc:a005969f642bf644c211097ef9c234859"><td class="mdescLeft">&#160;</td><td class="mdescRight">load state of fsm  <br /></td></tr>
<tr class="separator:a005969f642bf644c211097ef9c234859"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad87079cb47fdca803a4310aad08f95bc" id="r_ad87079cb47fdca803a4310aad08f95bc"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad87079cb47fdca803a4310aad08f95bc">GetCurrentStableStateID</a> ()</td></tr>
<tr class="separator:ad87079cb47fdca803a4310aad08f95bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2010ad60a87f54c0f43f0f63696ace6b" id="r_a2010ad60a87f54c0f43f0f63696ace6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2010ad60a87f54c0f43f0f63696ace6b">GetInternalStateID</a> ()</td></tr>
<tr class="separator:a2010ad60a87f54c0f43f0f63696ace6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adeff2d791ec8dcf75c7969b5901caa8e" id="r_adeff2d791ec8dcf75c7969b5901caa8e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#adeff2d791ec8dcf75c7969b5901caa8e">OnStoreSave</a> (<a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a> <a class="el" href="../../db/d06/class_param3.html">ctx</a>)</td></tr>
<tr class="memdesc:adeff2d791ec8dcf75c7969b5901caa8e"><td class="mdescLeft">&#160;</td><td class="mdescRight">save state of fsm  <br /></td></tr>
<tr class="separator:adeff2d791ec8dcf75c7969b5901caa8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cc92ee3a6b6a9da47f97db5d337aa5f" id="r_a4cc92ee3a6b6a9da47f97db5d337aa5f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a4cc92ee3a6b6a9da47f97db5d337aa5f">RandomizeFSMState</a> (<a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">hasBullet</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">hasMagazine</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">isJammed</a>)</td></tr>
<tr class="memdesc:a4cc92ee3a6b6a9da47f97db5d337aa5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deprecated, use RandomizeFSMStateEx for better results.  <br /></td></tr>
<tr class="separator:a4cc92ee3a6b6a9da47f97db5d337aa5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2177109633c4bb7835df46abf888c610" id="r_a2177109633c4bb7835df46abf888c610"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a2177109633c4bb7835df46abf888c610">RandomizeFSMStateEx</a> (<a class="el" href="../../d2/d01/classarray.html">array</a>&lt; <a class="el" href="../../d8/d0f/_weapon_stable_state_8c.html#a81850a19579d69fbd62d39a8f08a5f38">MuzzleState</a> &gt; <a class="el" href="../../db/d06/class_param3.html">muzzleStates</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">hasMagazine</a>, <a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../db/d06/class_param3.html">isJammed</a>)</td></tr>
<tr class="memdesc:a2177109633c4bb7835df46abf888c610"><td class="mdescLeft">&#160;</td><td class="mdescRight">With the parameters given, selects a random suitable state for the FSM of the weapon @NOTE: It is better to use Weapon_Base.RandomizeFSMState instead of calling this one @WARNING: Weapon_Base.Synchronize call might be needed, if this method is called while clients are connected.  <br /></td></tr>
<tr class="separator:a2177109633c4bb7835df46abf888c610"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a27f73d750f0d2ef2e6d628097dfd3a6b" id="r_a27f73d750f0d2ef2e6d628097dfd3a6b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a27f73d750f0d2ef2e6d628097dfd3a6b">m_NextStateId</a> = 0</td></tr>
<tr class="separator:a27f73d750f0d2ef2e6d628097dfd3a6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa545d21e1530fd56d60cbf59ec2ce77f" id="r_aa545d21e1530fd56d60cbf59ec2ce77f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">ref</a> <a class="el" href="../../d2/d01/classarray.html">array</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a> = <a class="el" href="../../db/d06/class_param3.html">new</a> <a class="el" href="../../d2/d01/classarray.html">array</a>&lt;<a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>&gt;</td></tr>
<tr class="memdesc:aa545d21e1530fd56d60cbf59ec2ce77f"><td class="mdescLeft">&#160;</td><td class="mdescRight">counter for InternalID: each state in a fsm is assigned an unique number  <br /></td></tr>
<tr class="separator:aa545d21e1530fd56d60cbf59ec2ce77f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ac7732a0b7502ad6de0acea045eb4c605" id="r_ac7732a0b7502ad6de0acea045eb4c605"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ac7732a0b7502ad6de0acea045eb4c605">m_SynchronizeAttempts</a></td></tr>
<tr class="separator:ac7732a0b7502ad6de0acea045eb4c605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a0e1d8638db7e25eb712aaaed324463" id="r_a6a0e1d8638db7e25eb712aaaed324463"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a6a0e1d8638db7e25eb712aaaed324463">m_LastSynchronizeTime</a></td></tr>
<tr class="separator:a6a0e1d8638db7e25eb712aaaed324463"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-attribs" name="pri-static-attribs"></a>
Static Private Attributes</h2></td></tr>
<tr class="memitem:a8b4baa2feb57c1599804218c2fc698b9" id="r_a8b4baa2feb57c1599804218c2fc698b9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">static</a> <a class="el" href="../../db/d06/class_param3.html">const</a> <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a8b4baa2feb57c1599804218c2fc698b9">MAX_SYNCHRONIZE_ATTEMPTS</a> = 12</td></tr>
<tr class="separator:a8b4baa2feb57c1599804218c2fc698b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05ce2ff1798586ff4772c0deb8697525" id="r_a05ce2ff1798586ff4772c0deb8697525"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">static</a> <a class="el" href="../../db/d06/class_param3.html">const</a> <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a05ce2ff1798586ff4772c0deb8697525">MIN_SYNCHRONIZE_INTERVAL</a> = 3000</td></tr>
<tr class="separator:a05ce2ff1798586ff4772c0deb8697525"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a87f53f255701e754e4cfd7a1be6e6341" id="r_a87f53f255701e754e4cfd7a1be6e6341"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d06/class_param3.html">static</a> <a class="el" href="../../db/d06/class_param3.html">const</a> <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a87f53f255701e754e4cfd7a1be6e6341">RESET_SYNCHRONIZE_THRESHOLD</a> = 3600000</td></tr>
<tr class="separator:a87f53f255701e754e4cfd7a1be6e6341"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock">
<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00004">4</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a id="a39c6c17bbe295f0b340e09b9aa2e0370" name="a39c6c17bbe295f0b340e09b9aa2e0370"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39c6c17bbe295f0b340e09b9aa2e0370">&#9670;&#160;</a></span>AddTransition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::AddTransition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d01/class_f_s_m_transition.html">FSMTransition</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>t</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>adds transition into transition table As a side effect registers the state(s) into m_UniqueStates </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00031">31</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   32</span>  {</div>
<div class="line"><span class="lineno">   33</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">super</a>.AddTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>);</div>
<div class="line"><span class="lineno">   34</span> </div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_function" href="#a6acb1bf76b6f43ce6107ab7b374c1ea3">SetInternalID</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState);</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_function" href="#a6acb1bf76b6f43ce6107ab7b374c1ea3">SetInternalID</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState);</div>
<div class="line"><span class="lineno">   37</span>  }</div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a6acb1bf76b6f43ce6107ab7b374c1ea3"><div class="ttname"><a href="#a6acb1bf76b6f43ce6107ab7b374c1ea3">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::SetInternalID</a></div><div class="ttdeci">void SetInternalID(WeaponStateBase state)</div><div class="ttdoc">unique list of states in this machine (automation of save/load)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00015">WeaponFSM.c:15</a></div></div>
<div class="ttc" id="aclass_param3_html"><div class="ttname"><a href="../../db/d06/class_param3.html">Param3</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d02/3___game_2_entities_2_entity_a_i_8c_source.html#l00095">EntityAI.c:95</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac5e58979a0005f2a048074474b41a9e2" name="ac5e58979a0005f2a048074474b41a9e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5e58979a0005f2a048074474b41a9e2">&#9670;&#160;</a></span>FindStableStateForID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::FindStableStateForID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a></td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load from database - reverse lookup for state from saved id </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>the id stored in database during save </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00326">326</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  327</span>  {</div>
<div class="line"><span class="lineno">  328</span>    <span class="keywordflow">if</span> (<span class="keywordtype">id</span> == 0)</div>
<div class="line"><span class="lineno">  329</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>;</div>
<div class="line"><span class="lineno">  330</span> </div>
<div class="line"><span class="lineno">  331</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">count</a> = m_Transitions.Count();</div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = 0; <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> &lt; <a class="code hl_class" href="../../db/d06/class_param3.html">count</a>; ++<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>)</div>
<div class="line"><span class="lineno">  333</span>    {</div>
<div class="line"><span class="lineno">  334</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">WeaponTransition</a> <a class="code hl_class" href="../../db/d06/class_param3.html">trans</a> = m_Transitions.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>);</div>
<div class="line"><span class="lineno">  335</span>      <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>.Cast(<a class="code hl_class" href="../../db/d06/class_param3.html">trans</a>.m_srcState);</div>
<div class="line"><span class="lineno">  336</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a> &amp;&amp; <span class="keywordtype">id</span> == <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetCurrentStateID())</div>
<div class="line"><span class="lineno">  337</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>;</div>
<div class="line"><span class="lineno">  338</span>    }</div>
<div class="line"><span class="lineno">  339</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>;</div>
<div class="line"><span class="lineno">  340</span>  }</div>
<div class="ttc" id="aclass_weapon_stable_state_html"><div class="ttname"><a href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a></div><div class="ttdoc">represents weapon's stable state (i.e. the basic states that the weapon will spend the most time in)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d0c/_crossbow_8c_source.html#l00026">Crossbow.c:27</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adbad6d95dace65d55f3737d8d773a806" name="adbad6d95dace65d55f3737d8d773a806"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbad6d95dace65d55f3737d8d773a806">&#9670;&#160;</a></span>FindStateForInternalID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::FindStateForInternalID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a></td>          <td class="paramname"><span class="paramname"><em>id</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>retrieve base state that matches given internal id </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">id</td><td>the id stored in database during save </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00310">310</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  311</span>  {</div>
<div class="line"><span class="lineno">  312</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> = <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Count();</div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> = 0; <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> &lt; <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a>; ++<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>)</div>
<div class="line"><span class="lineno">  314</span>    {</div>
<div class="line"><span class="lineno">  315</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state_id</a> = <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>).GetInternalStateID();</div>
<div class="line"><span class="lineno">  316</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state_id</a> == <span class="keywordtype">id</span>)</div>
<div class="line"><span class="lineno">  317</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>);</div>
<div class="line"><span class="lineno">  318</span>    }</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>;</div>
<div class="line"><span class="lineno">  320</span>  }</div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_aa545d21e1530fd56d60cbf59ec2ce77f"><div class="ttname"><a href="#aa545d21e1530fd56d60cbf59ec2ce77f">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::m_UniqueStates</a></div><div class="ttdeci">ref array&lt; WeaponStateBase &gt; m_UniqueStates</div><div class="ttdoc">counter for InternalID: each state in a fsm is assigned an unique number</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00013">WeaponFSM.c:13</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad87079cb47fdca803a4310aad08f95bc" name="ad87079cb47fdca803a4310aad08f95bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad87079cb47fdca803a4310aad08f95bc">&#9670;&#160;</a></span>GetCurrentStableStateID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::GetCurrentStableStateID </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00653">653</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  654</span>  {</div>
<div class="line"><span class="lineno">  655</span>    <span class="comment">// 1) if current state is stable state then return ID directly</span></div>
<div class="line"><span class="lineno">  656</span>    <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>.Cast(GetCurrentState());</div>
<div class="line"><span class="lineno">  657</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>)</div>
<div class="line"><span class="lineno">  658</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetCurrentStateID();</div>
<div class="line"><span class="lineno">  659</span> </div>
<div class="line"><span class="lineno">  660</span>    <span class="comment">// 2) otherwise find closest stable state (by looking on abort event)</span></div>
<div class="line"><span class="lineno">  661</span>    <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">abort_dst</a> = FindAbortDestinationState(<span class="keyword">new</span> WeaponEventHumanCommandActionAborted(<a class="code hl_class" href="../../db/d06/class_param3.html">null</a>));</div>
<div class="line"><span class="lineno">  662</span>    <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">closest_stable_state</a> = <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>.Cast(<a class="code hl_class" href="../../db/d06/class_param3.html">abort_dst</a>);</div>
<div class="line"><span class="lineno">  663</span> </div>
<div class="line"><span class="lineno">  664</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">closest_stable_state</a>)</div>
<div class="line"><span class="lineno">  665</span>    {</div>
<div class="line"><span class="lineno">  666</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#gaaa9351d895a1f244a26fd635c378c536">Print</a>(<span class="stringliteral">&quot;[wpnfsm] Save occured in fsm transition! current state=&quot;</span> + GetCurrentState() + <span class="stringliteral">&quot; closes stable state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">closest_stable_state</a> + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">closest_stable_state</a>.GetCurrentStateID());</div>
<div class="line"><span class="lineno">  667</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">closest_stable_state</a>.GetCurrentStateID();</div>
<div class="line"><span class="lineno">  668</span>    }</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>    <a class="code hl_function" href="../../d0/d02/group___debug.html#gaaa9351d895a1f244a26fd635c378c536">Print</a>(<span class="stringliteral">&quot;[wpnfsm] Warning! Save occured in fsm transition! GetCurrentStateID - cannot find closest weapon stable state.&quot;</span>);</div>
<div class="line"><span class="lineno">  671</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><span class="lineno">  672</span>  }</div>
<div class="ttc" id="aclass_weapon_state_base_html"><div class="ttname"><a href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a></div><div class="ttdoc">represent weapon state base</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d02/_bullet_hide_8c_source.html#l00001">BulletHide.c:2</a></div></div>
<div class="ttc" id="agroup___debug_html_gaaa9351d895a1f244a26fd635c378c536"><div class="ttname"><a href="../../d0/d02/group___debug.html#gaaa9351d895a1f244a26fd635c378c536">Print</a></div><div class="ttdeci">proto void Print(void var)</div><div class="ttdoc">Prints content of variable to console/log.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d0/d02/group___debug.html#gaaa9351d895a1f244a26fd635c378c536">Print()</a>.</p>

</div>
</div>
<a id="a2010ad60a87f54c0f43f0f63696ace6b" name="a2010ad60a87f54c0f43f0f63696ace6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2010ad60a87f54c0f43f0f63696ace6b">&#9670;&#160;</a></span>GetInternalStateID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::GetInternalStateID </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00677">677</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  678</span>  {</div>
<div class="line"><span class="lineno">  679</span>    <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">curr</a> = GetCurrentState();</div>
<div class="line"><span class="lineno">  680</span>    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;</div>
<div class="line"><span class="lineno">  681</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">curr</a>)</div>
<div class="line"><span class="lineno">  682</span>      <span class="keywordtype">id</span> = <a class="code hl_class" href="../../db/d06/class_param3.html">curr</a>.GetInternalStateID();</div>
<div class="line"><span class="lineno">  683</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">id</a>;</div>
<div class="line"><span class="lineno">  684</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a47c5052caf7a6925483e8748a3503a07" name="a47c5052caf7a6925483e8748a3503a07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c5052caf7a6925483e8748a3503a07">&#9670;&#160;</a></span>Internal_ValidateAndRepair()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::Internal_ValidateAndRepair </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>validate the state of the gun and repair if mismatch </p>
<dl class="section return"><dt>Returns</dt><dd>bool whether it performed repairing or not </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00462">462</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  463</span>  {</div>
<div class="line"><span class="lineno">  464</span>    <span class="keywordtype">bool</span> <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  465</span> </div>
<div class="line"><span class="lineno">  466</span>    <span class="comment">// Only repair stable states</span></div>
<div class="line"><span class="lineno">  467</span>    <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>.Cast(<a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>);</div>
<div class="line"><span class="lineno">  468</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a> &amp;&amp; <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsRepairEnabled())</div>
<div class="line"><span class="lineno">  469</span>    {</div>
<div class="line"><span class="lineno">  470</span>      <a class="code hl_class" href="../../d3/d0c/class_weapon___base.html">Weapon_Base</a> <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.m_weapon;</div>
<div class="line"><span class="lineno">  471</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>)</div>
<div class="line"><span class="lineno">  472</span>      {</div>
<div class="line"><span class="lineno">  473</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> |= <a class="code hl_function" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>,</div>
<div class="line"><span class="lineno">  474</span>                                            <span class="stringliteral">&quot;MagazineRepair&quot;</span>,</div>
<div class="line"><span class="lineno">  475</span>                                            <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.HasMagazine(), (<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.GetMagazine(0) != <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>),</div>
<div class="line"><span class="lineno">  476</span>                                            <span class="keyword">new</span> WeaponEventAttachMagazine, <span class="keyword">new</span> WeaponEventDetachMagazine,</div>
<div class="line"><span class="lineno">  477</span>                                            <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  478</span> </div>
<div class="line"><span class="lineno">  479</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> |= <a class="code hl_function" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>,</div>
<div class="line"><span class="lineno">  480</span>                                            <span class="stringliteral">&quot;JammedRepair&quot;</span>,</div>
<div class="line"><span class="lineno">  481</span>                                            <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsJammed(), <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.IsJammed(),</div>
<div class="line"><span class="lineno">  482</span>                                            <span class="keyword">new</span> WeaponEventTriggerToJam, <span class="keyword">new</span> WeaponEventUnjam,</div>
<div class="line"><span class="lineno">  483</span>                                            <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  484</span> </div>
<div class="line"><span class="lineno">  485</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.IsJammed())</div>
<div class="line"><span class="lineno">  486</span>          <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a>;</div>
<div class="line"><span class="lineno">  487</span> </div>
<div class="line"><span class="lineno">  488</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.GetMuzzleCount();</div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordflow">switch</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a>)</div>
<div class="line"><span class="lineno">  490</span>        {</div>
<div class="line"><span class="lineno">  491</span>        <span class="keywordflow">case</span> 1:</div>
<div class="line"><span class="lineno">  492</span>        {</div>
<div class="line"><span class="lineno">  493</span>          <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> |= <a class="code hl_function" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>,</div>
<div class="line"><span class="lineno">  494</span>                                              <span class="stringliteral">&quot;ChamberFiredRepair&quot;</span>,</div>
<div class="line"><span class="lineno">  495</span>                                              <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsChamberFiredOut(0), <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.IsChamberFiredOut(0),</div>
<div class="line"><span class="lineno">  496</span>                                              <span class="keyword">new</span> WeaponEventTrigger, <span class="keyword">new</span> WeaponEventMechanism,</div>
<div class="line"><span class="lineno">  497</span>                                              <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  498</span> </div>
<div class="line"><span class="lineno">  499</span>          <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> |= <a class="code hl_function" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>,</div>
<div class="line"><span class="lineno">  500</span>                                              <span class="stringliteral">&quot;ChamberRepair&quot;</span>,</div>
<div class="line"><span class="lineno">  501</span>                                              <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsChamberFull(0), <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.IsChamberFullEx(0),</div>
<div class="line"><span class="lineno">  502</span>                                              <span class="keyword">new</span> WeaponEventLoad1Bullet, <span class="keyword">new</span> WeaponEventMechanism,</div>
<div class="line"><span class="lineno">  503</span>                                              <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  506</span>        }</div>
<div class="line"><span class="lineno">  507</span>        <span class="keywordflow">default</span>:</div>
<div class="line"><span class="lineno">  508</span>        {</div>
<div class="line"><span class="lineno">  509</span>          <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = 0; <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> &lt; <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a>; ++<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>)</div>
<div class="line"><span class="lineno">  510</span>          {</div>
<div class="line"><span class="lineno">  511</span>            <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> |= <a class="code hl_function" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>,</div>
<div class="line"><span class="lineno">  512</span>                                                <span class="stringliteral">&quot;ChamberFiredRepair&quot;</span>,</div>
<div class="line"><span class="lineno">  513</span>                                                <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsChamberFiredOut(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>), <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.IsChamberFiredOut(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>),</div>
<div class="line"><span class="lineno">  514</span>                                                <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <span class="comment">// A bit brute forced, not really any clean way to transition</span></div>
<div class="line"><span class="lineno">  515</span>                                                <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  516</span> </div>
<div class="line"><span class="lineno">  517</span>            <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a> |= <a class="code hl_function" href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">ValidateAndRepairHelper</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>,</div>
<div class="line"><span class="lineno">  518</span>                                                <span class="stringliteral">&quot;ChamberRepair&quot;</span>,</div>
<div class="line"><span class="lineno">  519</span>                                                <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsChamberFull(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>), <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.IsChamberFull(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>),</div>
<div class="line"><span class="lineno">  520</span>                                                <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <span class="comment">// A bit brute forced, not really any clean way to transition</span></div>
<div class="line"><span class="lineno">  521</span>                                                <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  522</span>          }</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  525</span>        }</div>
<div class="line"><span class="lineno">  526</span>        }</div>
<div class="line"><span class="lineno">  527</span>      }</div>
<div class="line"><span class="lineno">  528</span>    }</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">repaired</a>;</div>
<div class="line"><span class="lineno">  531</span>  }</div>
<div class="ttc" id="a_stamina_handler_8c_html_aa2b21fd783d214e968db4f6522998563"><div class="ttname"><a href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a></div><div class="ttdeci">bool m_State</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">StaminaHandler.c:20</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a8a5c87ce381136bf52b4bb20e3d7b7ba"><div class="ttname"><a href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::ValidateAndRepairHelper</a></div><div class="ttdeci">bool ValidateAndRepairHelper(Weapon_Base weapon, string name, bool stateCondition, bool gunCondition, WeaponEventBase e1, WeaponEventBase e2, out WeaponStableState state)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00533">WeaponFSM.c:533</a></div></div>
<div class="ttc" id="aclass_weapon___base_html"><div class="ttname"><a href="../../d3/d0c/class_weapon___base.html">Weapon_Base</a></div><div class="ttdoc">shorthand</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d02/_bolt_action_rifle___base_8c_source.html#l00005">BoltActionRifle_Base.c:6</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>.</p>

</div>
</div>
<a id="a2892e2067f0b840835514bc82ab44ce7" name="a2892e2067f0b840835514bc82ab44ce7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2892e2067f0b840835514bc82ab44ce7">&#9670;&#160;</a></span>LoadAndSetCurrentFSMState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::LoadAndSetCurrentFSMState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#a4ff67286551fc6c18504752a277c8bc1">ParamsReadContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a></td>          <td class="paramname"><span class="paramname"><em>version</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00342">342</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  343</span>  {</div>
<div class="line"><span class="lineno">  344</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a> = -1;</div>
<div class="line"><span class="lineno">  345</span>    <span class="keywordflow">if</span> (!<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>.Read(<a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>))</div>
<div class="line"><span class="lineno">  346</span>    {</div>
<div class="line"><span class="lineno">  347</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] LoadCurrentFSMState - cannot read current state&quot;</span>);</div>
<div class="line"><span class="lineno">  348</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  349</span>    }</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_function" href="#adbad6d95dace65d55f3737d8d773a806">FindStateForInternalID</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  352</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>)</div>
<div class="line"><span class="lineno">  353</span>    {</div>
<div class="line"><span class="lineno">  354</span>      Terminate();</div>
<div class="line"><span class="lineno">  355</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] synced current state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  356</span>      <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>;</div>
<div class="line"><span class="lineno">  357</span>      <a class="code hl_function" href="../../d5/d0d/_effect_8c.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  358</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  359</span>    }</div>
<div class="line"><span class="lineno">  360</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  361</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] LoadCurrentFSMState - cannot find state for id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  362</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  363</span> </div>
<div class="line"><span class="lineno">  364</span>  }</div>
<div class="ttc" id="a4___world_2_entities_2_firearms_2_debug_8c_html_afa33033805ea8cbc9b91ae2d002ffcd7"><div class="ttname"><a href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a></div><div class="ttdeci">void wpnDebugPrint(string s)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">Debug.c:9</a></div></div>
<div class="ttc" id="a_effect_8c_html_a07aaf1227e4d645f15e0a964f54ef291"><div class="ttname"><a href="../../d5/d0d/_effect_8c.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a></div><div class="ttdeci">void Start()</div><div class="ttdoc">Plays all elements this effects consists of.</div><div class="ttdef"><b>Definition</b> <a href="../../d5/d0d/_effect_8c_source.html#l00149">Effect.c:149</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_adbad6d95dace65d55f3737d8d773a806"><div class="ttname"><a href="#adbad6d95dace65d55f3737d8d773a806">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::FindStateForInternalID</a></div><div class="ttdeci">WeaponStateBase FindStateForInternalID(int id)</div><div class="ttdoc">retrieve base state that matches given internal id</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00310">WeaponFSM.c:310</a></div></div>
<div class="ttc" id="aclass_log_manager_html"><div class="ttname"><a href="../../d9/d07/class_log_manager.html">LogManager</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00674">Debug.c:675</a></div></div>
<div class="ttc" id="aclass_log_manager_html_a1936dba0ee4da1a581859d6603178326"><div class="ttname"><a href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">LogManager::IsWeaponLogEnable</a></div><div class="ttdeci">static bool IsWeaponLogEnable()</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">Debug.c:799</a></div></div>
<div class="ttc" id="agroup___debug_html_ga786b160dafbe15abb829786ba345cb15"><div class="ttname"><a href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a></div><div class="ttdeci">void Error(string err)</div><div class="ttdoc">Messagebox with error message.</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d09/_en_debug_8c_source.html#l00090">EnDebug.c:90</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, <a class="el" href="../../d5/d0d/_effect_8c_source.html#l00149">Start()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">wpnDebugPrint()</a>.</p>

</div>
</div>
<a id="a7764df4dff05076f74167b0ce50bdc43" name="a7764df4dff05076f74167b0ce50bdc43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7764df4dff05076f74167b0ce50bdc43">&#9670;&#160;</a></span>LoadCurrentFSMState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::LoadCurrentFSMState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#a4ff67286551fc6c18504752a277c8bc1">ParamsReadContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a></td>          <td class="paramname"><span class="paramname"><em>version</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load current state of fsm </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00369">369</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  370</span>  {</div>
<div class="line"><span class="lineno">  371</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#a2892e2067f0b840835514bc82ab44ce7">LoadAndSetCurrentFSMState</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>, version))</div>
<div class="line"><span class="lineno">  372</span>    {</div>
<div class="line"><span class="lineno">  373</span>      <span class="keywordtype">bool</span> <a class="code hl_class" href="../../db/d06/class_param3.html">res</a> = <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.LoadCurrentFSMState(<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>, version);</div>
<div class="line"><span class="lineno">  374</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#acea538bf7a4dc05b05c22218a83bee44">wpnDebugSpam</a>(<span class="stringliteral">&quot;[wpnfsm] LoadCurrentFSMState - loaded current state=&quot;</span> + GetCurrentState());</div>
<div class="line"><span class="lineno">  375</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">res</a>;</div>
<div class="line"><span class="lineno">  376</span>    }</div>
<div class="line"><span class="lineno">  377</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  378</span>  }</div>
<div class="ttc" id="a4___world_2_entities_2_firearms_2_debug_8c_html_acea538bf7a4dc05b05c22218a83bee44"><div class="ttname"><a href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#acea538bf7a4dc05b05c22218a83bee44">wpnDebugSpam</a></div><div class="ttdeci">void wpnDebugSpam(string s)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00017">Debug.c:17</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a2892e2067f0b840835514bc82ab44ce7"><div class="ttname"><a href="#a2892e2067f0b840835514bc82ab44ce7">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::LoadAndSetCurrentFSMState</a></div><div class="ttdeci">bool LoadAndSetCurrentFSMState(ParamsReadContext ctx, int version)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00342">WeaponFSM.c:342</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00017">wpnDebugSpam()</a>.</p>

</div>
</div>
<a id="a007b947e912d1e84eca73d5c8bd45901" name="a007b947e912d1e84eca73d5c8bd45901"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a007b947e912d1e84eca73d5c8bd45901">&#9670;&#160;</a></span>LoadCurrentUnstableFSMState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::LoadCurrentUnstableFSMState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a></td>          <td class="paramname"><span class="paramname"><em>version</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00380">380</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  381</span>  {</div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="#a2892e2067f0b840835514bc82ab44ce7">LoadAndSetCurrentFSMState</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>, version))</div>
<div class="line"><span class="lineno">  383</span>    {</div>
<div class="line"><span class="lineno">  384</span>      <span class="comment">// read all substates</span></div>
<div class="line"><span class="lineno">  385</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> = <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Count();</div>
<div class="line"><span class="lineno">  386</span>      <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> = 0; <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> &lt; <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a>; ++<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>)</div>
<div class="line"><span class="lineno">  387</span>      {</div>
<div class="line"><span class="lineno">  388</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#acea538bf7a4dc05b05c22218a83bee44">wpnDebugSpam</a>(<span class="stringliteral">&quot;[wpnfsm] LoadCurrentUnstableFSMState &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> + <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>).GetInternalStateID() + <span class="stringliteral">&quot; state=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>));</div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>).LoadCurrentFSMState(<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>, version))</div>
<div class="line"><span class="lineno">  390</span>          <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] LoadCurrentUnstableFSMState - cannot load unique state &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> + <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> + <span class="stringliteral">&quot; with id=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>).GetInternalStateID() + <span class="stringliteral">&quot; state=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>));</div>
<div class="line"><span class="lineno">  391</span>      }</div>
<div class="line"><span class="lineno">  392</span>      <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  393</span>    }</div>
<div class="line"><span class="lineno">  394</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  395</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00017">wpnDebugSpam()</a>.</p>

</div>
</div>
<a id="a1e063b90cbfec70349d96917f43951e5" name="a1e063b90cbfec70349d96917f43951e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e063b90cbfec70349d96917f43951e5">&#9670;&#160;</a></span>OnFailThresholdBreached()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">void</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::OnFailThresholdBreached </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d05/class_weapon.html">Weapon</a></td>          <td class="paramname"><span class="paramname"><em>weapon</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d02/classstring.html">string</a></td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>stateCondition</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>gunCondition</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00598">598</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  599</span>  {</div>
<div class="line"><span class="lineno">  600</span>    <span class="comment">// Now seeing THIS one, after the one above, THIS one CAN be bad</span></div>
<div class="line"><span class="lineno">  601</span>    <span class="comment">// As the state was identified as being desynced with the actual weapon state</span></div>
<div class="line"><span class="lineno">  602</span>    <span class="comment">// But the system was unable to fix it, so the weapon is now working improperly or not at all</span></div>
<div class="line"><span class="lineno">  603</span>    <span class="comment">// There is even the possibility that this weapon is now permanently broken</span></div>
<div class="line"><span class="lineno">  604</span>    <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;[wpnfsm] %1 ValidateAndRepair THRESHOLD BREACH - %2 - %3 - state: %4 != weapon: %5&quot;</span>,</div>
<div class="line"><span class="lineno">  605</span>                        <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.GetDebugName(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>), <a class="code hl_variable" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>, <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">stateCondition</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">gunCondition</a>));</div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span>    <span class="comment">// At this point might even consider just deleting the weapon :c</span></div>
<div class="line"><span class="lineno">  608</span>  }</div>
<div class="ttc" id="a_cfg_player_spawn_data_json_8c_html_ad8c6fb88ec9295d5e3b3c7ad4854b647"><div class="ttname"><a href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a></div><div class="ttdeci">PlayerSpawnPresetDiscreteItemSetSlotData name</div><div class="ttdoc">one set for cargo</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, and <a class="el" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>.</p>

</div>
</div>
<a id="a005969f642bf644c211097ef9c234859" name="a005969f642bf644c211097ef9c234859"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a005969f642bf644c211097ef9c234859">&#9670;&#160;</a></span>OnStoreLoad()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::OnStoreLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#a4ff67286551fc6c18504752a277c8bc1">ParamsReadContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a></td>          <td class="paramname"><span class="paramname"><em>version</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>load state of fsm </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00625">625</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  626</span>  {</div>
<div class="line"><span class="lineno">  627</span>    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = 0;</div>
<div class="line"><span class="lineno">  628</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>.Read(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  629</span>    <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_function" href="#ac5e58979a0005f2a048074474b41a9e2">FindStableStateForID</a>(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  630</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>)</div>
<div class="line"><span class="lineno">  631</span>    {</div>
<div class="line"><span class="lineno">  632</span>      Terminate();</div>
<div class="line"><span class="lineno">  633</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] OnStoreLoad - loading current state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> + <span class="stringliteral">&quot; id=&quot;</span> + <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  634</span>      <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>;</div>
<div class="line"><span class="lineno">  635</span>      <a class="code hl_function" href="../../d5/d0d/_effect_8c.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  636</span>    }</div>
<div class="line"><span class="lineno">  637</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  638</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#gaaa9351d895a1f244a26fd635c378c536">Print</a>(<span class="stringliteral">&quot;[wpnfsm] Warning! OnStoreLoad - cannot load curent weapon state, id=&quot;</span> + <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  639</span> </div>
<div class="line"><span class="lineno">  640</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  641</span>  }</div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_ac5e58979a0005f2a048074474b41a9e2"><div class="ttname"><a href="#ac5e58979a0005f2a048074474b41a9e2">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::FindStableStateForID</a></div><div class="ttdeci">WeaponStableState FindStableStateForID(int id)</div><div class="ttdoc">load from database - reverse lookup for state from saved id</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00326">WeaponFSM.c:326</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, <a class="el" href="../../d0/d02/group___debug.html#gaaa9351d895a1f244a26fd635c378c536">Print()</a>, <a class="el" href="../../d5/d0d/_effect_8c_source.html#l00149">Start()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">wpnDebugPrint()</a>.</p>

</div>
</div>
<a id="adeff2d791ec8dcf75c7969b5901caa8e" name="adeff2d791ec8dcf75c7969b5901caa8e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adeff2d791ec8dcf75c7969b5901caa8e">&#9670;&#160;</a></span>OnStoreSave()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::OnStoreSave </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>save state of fsm </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00689">689</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  690</span>  {</div>
<div class="line"><span class="lineno">  691</span>    <span class="keywordtype">int</span> <span class="keywordtype">id</span> = <a class="code hl_function" href="#ad87079cb47fdca803a4310aad08f95bc">GetCurrentStableStateID</a>();</div>
<div class="line"><span class="lineno">  692</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#a968ee263a34343914e7219fd0b81cde1">wpnDebugSpamALot</a>(<span class="stringliteral">&quot;[wpnfsm] OnStoreSave - saving current state=&quot;</span> + GetCurrentState() + <span class="stringliteral">&quot; id=&quot;</span> + <span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  693</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>.Write(<span class="keywordtype">id</span>);</div>
<div class="line"><span class="lineno">  694</span>  }</div>
<div class="ttc" id="a4___world_2_entities_2_firearms_2_debug_8c_html_a968ee263a34343914e7219fd0b81cde1"><div class="ttname"><a href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#a968ee263a34343914e7219fd0b81cde1">wpnDebugSpamALot</a></div><div class="ttdeci">void wpnDebugSpamALot(string s)</div><div class="ttdef"><b>Definition</b> <a href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00025">Debug.c:25</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_ad87079cb47fdca803a4310aad08f95bc"><div class="ttname"><a href="#ad87079cb47fdca803a4310aad08f95bc">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::GetCurrentStableStateID</a></div><div class="ttdeci">int GetCurrentStableStateID()</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00653">WeaponFSM.c:653</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00025">wpnDebugSpamALot()</a>.</p>

</div>
</div>
<a id="a121dc2e835caf00f21e1150f7e03983b" name="a121dc2e835caf00f21e1150f7e03983b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121dc2e835caf00f21e1150f7e03983b">&#9670;&#160;</a></span>ProcessAbortEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">override</a> <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ProcessAbortEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d06/class_param3.html">out</a> <a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a></td>          <td class="paramname"><span class="paramname"><em>result</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00105">105</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  106</span>  {</div>
<div class="line"><span class="lineno">  107</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>())</div>
<div class="line"><span class="lineno">  108</span>    {</div>
<div class="line"><span class="lineno">  109</span>      <span class="keywordflow">if</span> (GetOwnerState())</div>
<div class="line"><span class="lineno">  110</span>        <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] SUB! &quot;</span> + GetOwnerState().<a class="code hl_variable" href="../../d4/d0c/_json_data_contaminated_area_8c.html#a651a3c9de2e16ff0deca8d09dedbda58">Type</a>().<a class="code hl_function" href="../../d0/d03/_en_convert_8c.html#afa7657e4f6687b78bc860ddff41c3bef">ToString</a>() + <span class="stringliteral">&quot;::ProcessAbortEvent(&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString() + <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  111</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  112</span>        <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] root::ProcessAbortEvent(&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString() + <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  113</span>    }</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="comment">// 1) look in submachine first (if any)</span></div>
<div class="line"><span class="lineno">  116</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> &amp;&amp; <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.HasFSM())</div>
<div class="line"><span class="lineno">  117</span>    {</div>
<div class="line"><span class="lineno">  118</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">HFSMBase&lt;WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase&gt;</a> a = <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.GetFSM();</div>
<div class="line"><span class="lineno">  119</span>      <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a>;</div>
<div class="line"><span class="lineno">  120</span>      <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">abort_dst</a> = a.ProcessAbortEvent(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a>);</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>      <span class="keywordflow">switch</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a>)</div>
<div class="line"><span class="lineno">  123</span>      {</div>
<div class="line"><span class="lineno">  124</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_OK:</div>
<div class="line"><span class="lineno">  125</span>      {</div>
<div class="line"><span class="lineno">  126</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] event processed by sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString());</div>
<div class="line"><span class="lineno">  127</span> </div>
<div class="line"><span class="lineno">  128</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">result</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a>; <span class="comment">// 1.1) submachine accepted event</span></div>
<div class="line"><span class="lineno">  129</span>        <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  130</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  131</span>      }</div>
<div class="line"><span class="lineno">  132</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_ABORTED:</div>
<div class="line"><span class="lineno">  133</span>      {</div>
<div class="line"><span class="lineno">  134</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] aborted sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString());</div>
<div class="line"><span class="lineno">  135</span> </div>
<div class="line"><span class="lineno">  136</span>        <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnAbort(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// 1.2) submachine aborted, abort submachine owner (i.e. this)</span></div>
<div class="line"><span class="lineno">  137</span> </div>
<div class="line"><span class="lineno">  138</span>        <span class="keywordflow">if</span> (GetOwnerState() == <a class="code hl_class" href="../../db/d06/class_param3.html">abort_dst</a>.GetParentState())</div>
<div class="line"><span class="lineno">  139</span>        {</div>
<div class="line"><span class="lineno">  140</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] aborted sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString() + <span class="stringliteral">&quot; &amp; abort destination reached.&quot;</span>);</div>
<div class="line"><span class="lineno">  141</span> </div>
<div class="line"><span class="lineno">  142</span>          <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">abort_dst</a>;</div>
<div class="line"><span class="lineno">  143</span>          <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnEntry(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// 1.3) submachine aborted, call onEntry on new state (cross-hierarchy transition)</span></div>
<div class="line"><span class="lineno">  144</span>          <a class="code hl_class" href="../../db/d06/class_param3.html">result</a> = <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_OK;</div>
<div class="line"><span class="lineno">  145</span>          <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  146</span>          <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  147</span>        }</div>
<div class="line"><span class="lineno">  148</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  149</span>        {</div>
<div class="line"><span class="lineno">  150</span>          <a class="code hl_class" href="../../db/d06/class_param3.html">result</a> = <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_ABORTED; <span class="comment">// 1.4) submachine has aborted, look for destination state in parent</span></div>
<div class="line"><span class="lineno">  151</span>          <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  152</span>          <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  153</span>        }</div>
<div class="line"><span class="lineno">  154</span> </div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  156</span>      }</div>
<div class="line"><span class="lineno">  157</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_TERMINATED:</div>
<div class="line"><span class="lineno">  158</span>      {</div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">break</span>; <span class="comment">// submachine has finished, look for local transitions from exited submachine</span></div>
<div class="line"><span class="lineno">  160</span>      }</div>
<div class="line"><span class="lineno">  161</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION:</div>
<div class="line"><span class="lineno">  162</span>      {</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] aborted (but no transition) sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString());</div>
<div class="line"><span class="lineno">  164</span> </div>
<div class="line"><span class="lineno">  165</span>        <span class="keywordflow">break</span>; <span class="comment">// submachine has no transition, look for transitions in local machine</span></div>
<div class="line"><span class="lineno">  166</span>      }</div>
<div class="line"><span class="lineno">  167</span>      }</div>
<div class="line"><span class="lineno">  168</span>    }</div>
<div class="line"><span class="lineno">  169</span> </div>
<div class="line"><span class="lineno">  170</span>    <span class="comment">// 2) local transitions</span></div>
<div class="line"><span class="lineno">  171</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = FindFirstUnguardedTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  172</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">i</a> == -1)</div>
<div class="line"><span class="lineno">  173</span>    {</div>
<div class="line"><span class="lineno">  174</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] abort event has no transition: src=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString() + <span class="stringliteral">&quot; e=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString());</div>
<div class="line"><span class="lineno">  175</span> </div>
<div class="line"><span class="lineno">  176</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">result</a> = <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION;</div>
<div class="line"><span class="lineno">  177</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  178</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  179</span>    }</div>
<div class="line"><span class="lineno">  180</span> </div>
<div class="line"><span class="lineno">  181</span>    <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnAbort(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  182</span> </div>
<div class="line"><span class="lineno">  183</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = FindFirstUnguardedTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  184</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">i</a> == -1)</div>
<div class="line"><span class="lineno">  185</span>    {</div>
<div class="line"><span class="lineno">  186</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] abort event has no transition: src=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString() + <span class="stringliteral">&quot; e=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString());</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">result</a> = <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION;</div>
<div class="line"><span class="lineno">  189</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  190</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  191</span>    }</div>
<div class="line"><span class="lineno">  192</span> </div>
<div class="line"><span class="lineno">  193</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">FSMTransition&lt;WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase&gt;</a> <a class="code hl_class" href="../../db/d06/class_param3.html">t</a> = m_Transitions.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>);</div>
<div class="line"><span class="lineno">  194</span>    <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="code hl_class" href="../../db/d06/class_param3.html">res</a> = <a class="code hl_function" href="#a6087c6149c99c8507ecd05709f3ab78f">ProcessAbortTransition</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  195</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">result</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">res</a>;</div>
<div class="line"><span class="lineno">  196</span>    <span class="keywordflow">switch</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">res</a>)</div>
<div class="line"><span class="lineno">  197</span>    {</div>
<div class="line"><span class="lineno">  198</span>    <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_OK:</div>
<div class="line"><span class="lineno">  199</span>    {</div>
<div class="line"><span class="lineno">  200</span>      <span class="comment">//if (LogManager.IsWeaponLogEnable()) fsmDebugSpam(&quot;[hfsm] abort event processed by machine=&quot; + m_State.ToString());</span></div>
<div class="line"><span class="lineno">  201</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  202</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>; <span class="comment">// machine accepted event</span></div>
<div class="line"><span class="lineno">  203</span>    }</div>
<div class="line"><span class="lineno">  204</span>    <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_ABORTED:</div>
<div class="line"><span class="lineno">  205</span>    {</div>
<div class="line"><span class="lineno">  206</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] aborted sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString() + <span class="stringliteral">&quot; will fall-through to dst=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState);</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  209</span>      <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState; <span class="comment">// store destination state for parent(s)</span></div>
<div class="line"><span class="lineno">  210</span>    }</div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_TERMINATED:</div>
<div class="line"><span class="lineno">  213</span>    {</div>
<div class="line"><span class="lineno">  214</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] aborted &amp; terminated sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString());</div>
<div class="line"><span class="lineno">  215</span> </div>
<div class="line"><span class="lineno">  216</span>      <span class="keywordflow">break</span>; <span class="comment">// submachine has finished, look for local transitions from exited submachine</span></div>
<div class="line"><span class="lineno">  217</span>    }</div>
<div class="line"><span class="lineno">  218</span>    <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION:</div>
<div class="line"><span class="lineno">  219</span>    {</div>
<div class="line"><span class="lineno">  220</span>      <span class="keywordflow">break</span>; <span class="comment">// submachine has no transition, look for transitions in local machine</span></div>
<div class="line"><span class="lineno">  221</span>    }</div>
<div class="line"><span class="lineno">  222</span>    }</div>
<div class="line"><span class="lineno">  223</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  224</span>  }</div>
<div class="ttc" id="a_en_convert_8c_html_afa7657e4f6687b78bc860ddff41c3bef"><div class="ttname"><a href="../../d0/d03/_en_convert_8c.html#afa7657e4f6687b78bc860ddff41c3bef">ToString</a></div><div class="ttdeci">proto string ToString()</div></div>
<div class="ttc" id="a_f_s_m_base_8c_html_a09f6ec45b8f9309647a7b1eb893bc29f"><div class="ttname"><a href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a></div><div class="ttdeci">ProcessEventResult</div><div class="ttdef"><b>Definition</b> <a href="../../da/d01/_f_s_m_base_8c_source.html#l00040">FSMBase.c:41</a></div></div>
<div class="ttc" id="a_h_f_s_m_base_8c_html_a8d311d98f081cd5719e56b2814d7bb85"><div class="ttname"><a href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a></div><div class="ttdeci">void fsmDebugPrint(string s)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00001">HFSMBase.c:1</a></div></div>
<div class="ttc" id="a_json_data_contaminated_area_8c_html_a651a3c9de2e16ff0deca8d09dedbda58"><div class="ttname"><a href="../../d4/d0c/_json_data_contaminated_area_8c.html#a651a3c9de2e16ff0deca8d09dedbda58">Type</a></div><div class="ttdeci">string Type</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d0c/_json_data_contaminated_area_8c_source.html#l00011">JsonDataContaminatedArea.c:11</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a6087c6149c99c8507ecd05709f3ab78f"><div class="ttname"><a href="#a6087c6149c99c8507ecd05709f3ab78f">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::ProcessAbortTransition</a></div><div class="ttdeci">ProcessEventResult ProcessAbortTransition(FSMTransition&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt; t, WeaponEventBase e)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00072">WeaponFSM.c:72</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_ae7d3938684ce733ea27a97ab89ef2ed9"><div class="ttname"><a href="#ae7d3938684ce733ea27a97ab89ef2ed9">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::ValidateAndRepair</a></div><div class="ttdeci">void ValidateAndRepair()</div><div class="ttdoc">validate the state of the gun and repair if mismatch</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00453">WeaponFSM.c:453</a></div></div>
<div class="ttc" id="aclass_log_manager_html_a8e070df24bcb6afaf456af7ba270294a"><div class="ttname"><a href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">LogManager::IsInventoryHFSMLogEnable</a></div><div class="ttdeci">static bool IsInventoryHFSMLogEnable()</div><div class="ttdef"><b>Definition</b> <a href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00749">Debug.c:749</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00001">fsmDebugPrint()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00749">LogManager::IsInventoryHFSMLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, <a class="el" href="../../d0/d03/_en_convert_8c_source.html#l00003">bool::ToString()</a>, <a class="el" href="../../d0/d03/_en_convert_8c.html#afa7657e4f6687b78bc860ddff41c3bef">ToString()</a>, and <a class="el" href="../../d4/d0c/_json_data_contaminated_area_8c_source.html#l00011">Type</a>.</p>

</div>
</div>
<a id="a6087c6149c99c8507ecd05709f3ab78f" name="a6087c6149c99c8507ecd05709f3ab78f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6087c6149c99c8507ecd05709f3ab78f">&#9670;&#160;</a></span>ProcessAbortTransition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ProcessAbortTransition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d01/class_f_s_m_transition.html">FSMTransition</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>t</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00072">72</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   73</span>  {</div>
<div class="line"><span class="lineno">   74</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] (local abort) state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState.ToString() + <span class="stringliteral">&quot;-------- ABORT event=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.ToString() + <span class="stringliteral">&quot;[G=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_guard.ToString() + <span class="stringliteral">&quot;]/A=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_action.ToString() + <span class="stringliteral">&quot; --------|&gt; dst=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState.ToString());</div>
<div class="line"><span class="lineno">   75</span> </div>
<div class="line"><span class="lineno">   76</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_action)</div>
<div class="line"><span class="lineno">   77</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_action.Action(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// 2) execute transition action (if any)</span></div>
<div class="line"><span class="lineno">   78</span> </div>
<div class="line"><span class="lineno">   79</span>    <span class="keyword">auto</span> <a class="code hl_class" href="../../db/d06/class_param3.html">tmp</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState.GetParentState();</div>
<div class="line"><span class="lineno">   80</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">tmp</a> == <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState.GetParentState())</div>
<div class="line"><span class="lineno">   81</span>    {</div>
<div class="line"><span class="lineno">   82</span>      <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState; <span class="comment">// 3) change state to new (or NULL)</span></div>
<div class="line"><span class="lineno">   83</span> </div>
<div class="line"><span class="lineno">   84</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState != <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>)</div>
<div class="line"><span class="lineno">   85</span>      {</div>
<div class="line"><span class="lineno">   86</span>        <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnEntry(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// 4a1) call onEntry on new state (see 4a2) )</span></div>
<div class="line"><span class="lineno">   87</span>        <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">   88</span>        <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_OK;</div>
<div class="line"><span class="lineno">   89</span>      }</div>
<div class="line"><span class="lineno">   90</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   91</span>      {</div>
<div class="line"><span class="lineno">   92</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] abort &amp; terminating fsm: state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState.ToString() + <span class="stringliteral">&quot; event=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.ToString());</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>        <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_TERMINATED; <span class="comment">// 4b) or terminate</span></div>
<div class="line"><span class="lineno">   95</span>      }</div>
<div class="line"><span class="lineno">   96</span>    }</div>
<div class="line"><span class="lineno">   97</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   98</span>    {</div>
<div class="line"><span class="lineno">   99</span>      <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>;</div>
<div class="line"><span class="lineno">  100</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  101</span>      <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_ABORTED; <span class="comment">// 4c) or signal abort to parent (with appropriate transition)</span></div>
<div class="line"><span class="lineno">  102</span>    }</div>
<div class="line"><span class="lineno">  103</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00001">fsmDebugPrint()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00749">LogManager::IsInventoryHFSMLogEnable()</a>, and <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>.</p>

</div>
</div>
<a id="af05813a5075904a48a7444c3769e4f77" name="af05813a5075904a48a7444c3769e4f77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af05813a5075904a48a7444c3769e4f77">&#9670;&#160;</a></span>ProcessEvent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">override</a> <a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ProcessEvent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00226">226</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  227</span>  {</div>
<div class="line"><span class="lineno">  228</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>())</div>
<div class="line"><span class="lineno">  229</span>    {</div>
<div class="line"><span class="lineno">  230</span>      <span class="keywordflow">if</span> (GetOwnerState())</div>
<div class="line"><span class="lineno">  231</span>        <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] SUB!::&quot;</span> + GetOwnerState().<a class="code hl_variable" href="../../d4/d0c/_json_data_contaminated_area_8c.html#a651a3c9de2e16ff0deca8d09dedbda58">Type</a>().<a class="code hl_function" href="../../d0/d03/_en_convert_8c.html#afa7657e4f6687b78bc860ddff41c3bef">ToString</a>() + <span class="stringliteral">&quot;::ProcessEvent(&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString() + <span class="stringliteral">&quot;)&quot;</span>);</div>
<div class="line"><span class="lineno">  232</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  233</span>        <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] root::ProcessEvent(&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString() + <span class="stringliteral">&quot; =&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.DumpToString());</div>
<div class="line"><span class="lineno">  234</span>    }</div>
<div class="line"><span class="lineno">  235</span> </div>
<div class="line"><span class="lineno">  236</span>    <span class="comment">// 1) completion transitions have priority (if any)</span></div>
<div class="line"><span class="lineno">  237</span>    <span class="keywordflow">if</span> (m_HasCompletions)</div>
<div class="line"><span class="lineno">  238</span>      ProcessCompletionTransitions();</div>
<div class="line"><span class="lineno">  239</span> </div>
<div class="line"><span class="lineno">  240</span>    <span class="comment">// 2) submachine then (if any)</span></div>
<div class="line"><span class="lineno">  241</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> &amp;&amp; <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.HasFSM())</div>
<div class="line"><span class="lineno">  242</span>    {</div>
<div class="line"><span class="lineno">  243</span>      <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a> = <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ProcessEvent(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  244</span> </div>
<div class="line"><span class="lineno">  245</span>      <span class="keywordflow">switch</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a>)</div>
<div class="line"><span class="lineno">  246</span>      {</div>
<div class="line"><span class="lineno">  247</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_OK:</div>
<div class="line"><span class="lineno">  248</span>      {</div>
<div class="line"><span class="lineno">  249</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a42ec7b4847da51d422f4b048151c94a1">fsmDebugSpam</a>(<span class="stringliteral">&quot;[hfsm] event processed by sub machine=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString());</div>
<div class="line"><span class="lineno">  250</span>        <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">subfsm_res</a>; <span class="comment">// submachine accepted event</span></div>
<div class="line"><span class="lineno">  251</span>      }</div>
<div class="line"><span class="lineno">  252</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_TERMINATED:</div>
<div class="line"><span class="lineno">  253</span>      {</div>
<div class="line"><span class="lineno">  254</span>        <span class="keywordflow">break</span>; <span class="comment">// submachine has finished, look for local transitions from exited submachine</span></div>
<div class="line"><span class="lineno">  255</span>      }</div>
<div class="line"><span class="lineno">  256</span>      <span class="keywordflow">case</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION:</div>
<div class="line"><span class="lineno">  257</span>      {</div>
<div class="line"><span class="lineno">  258</span>        <span class="keywordflow">break</span>; <span class="comment">// submachine has no transition, look for transitions in local machine</span></div>
<div class="line"><span class="lineno">  259</span>      }</div>
<div class="line"><span class="lineno">  260</span>      }</div>
<div class="line"><span class="lineno">  261</span>    }</div>
<div class="line"><span class="lineno">  262</span> </div>
<div class="line"><span class="lineno">  263</span>    <span class="comment">// 3) local transitions</span></div>
<div class="line"><span class="lineno">  264</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = FindFirstUnguardedTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  265</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">i</a> == -1)</div>
<div class="line"><span class="lineno">  266</span>    {</div>
<div class="line"><span class="lineno">  267</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] event has no transition: src=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString() + <span class="stringliteral">&quot; e=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString());</div>
<div class="line"><span class="lineno">  268</span> </div>
<div class="line"><span class="lineno">  269</span>      <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION;</div>
<div class="line"><span class="lineno">  270</span>    }</div>
<div class="line"><span class="lineno">  271</span> </div>
<div class="line"><span class="lineno">  272</span>    <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnExit(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  273</span> </div>
<div class="line"><span class="lineno">  274</span>    <span class="comment">// 3.5) find correct transition after handled exit</span></div>
<div class="line"><span class="lineno">  275</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = FindFirstUnguardedTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>);</div>
<div class="line"><span class="lineno">  276</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">i</a> == -1)</div>
<div class="line"><span class="lineno">  277</span>    {</div>
<div class="line"><span class="lineno">  278</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] event has no transition: src=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.ToString() + <span class="stringliteral">&quot; e=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.Type().ToString());</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>      <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_NO_TRANSITION;</div>
<div class="line"><span class="lineno">  281</span>    }</div>
<div class="line"><span class="lineno">  282</span> </div>
<div class="line"><span class="lineno">  283</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">FSMTransition&lt;WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase&gt;</a> <a class="code hl_class" href="../../db/d06/class_param3.html">row</a> = m_Transitions.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>);</div>
<div class="line"><span class="lineno">  284</span>    <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="code hl_class" href="../../db/d06/class_param3.html">res</a>;</div>
<div class="line"><span class="lineno">  285</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">row</a>.m_dstState != <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>)</div>
<div class="line"><span class="lineno">  286</span>    {</div>
<div class="line"><span class="lineno">  287</span>      <span class="comment">// this is regular transition</span></div>
<div class="line"><span class="lineno">  288</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">row</a>.m_srcState.GetParentState() == <a class="code hl_class" href="../../db/d06/class_param3.html">row</a>.m_dstState.GetParentState())</div>
<div class="line"><span class="lineno">  289</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">res</a> = LocalTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// transition is within this state machine</span></div>
<div class="line"><span class="lineno">  290</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  291</span>        <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;cross-hierarchy transition or misconfigured transition detected!&quot;</span>);</div>
<div class="line"><span class="lineno">  292</span>      <span class="comment">//res = HierarchicTransition(i, e); // transition has to cross hierarchy</span></div>
<div class="line"><span class="lineno">  293</span>    }</div>
<div class="line"><span class="lineno">  294</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  295</span>    {</div>
<div class="line"><span class="lineno">  296</span>      <span class="comment">// this is terminating transition</span></div>
<div class="line"><span class="lineno">  297</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">row</a>.m_srcState.GetParentState() == GetOwnerState())</div>
<div class="line"><span class="lineno">  298</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">res</a> = LocalTransition(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// terminating transition is within this state machine</span></div>
<div class="line"><span class="lineno">  299</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  300</span>        <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;cross-hierarchy transition or misconfigured transition detected!&quot;</span>);</div>
<div class="line"><span class="lineno">  301</span>      <span class="comment">//res = HierarchicTransition(i, e); // source node crosses hierarchy (terminate lies always within this machine)</span></div>
<div class="line"><span class="lineno">  302</span>    }</div>
<div class="line"><span class="lineno">  303</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../db/d06/class_param3.html">res</a>;</div>
<div class="line"><span class="lineno">  304</span>  }</div>
<div class="ttc" id="a_h_f_s_m_base_8c_html_a42ec7b4847da51d422f4b048151c94a1"><div class="ttname"><a href="../../d4/d09/_h_f_s_m_base_8c.html#a42ec7b4847da51d422f4b048151c94a1">fsmDebugSpam</a></div><div class="ttdeci">void fsmDebugSpam(string s)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00009">HFSMBase.c:9</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00001">fsmDebugPrint()</a>, <a class="el" href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00009">fsmDebugSpam()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00749">LogManager::IsInventoryHFSMLogEnable()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, <a class="el" href="../../d0/d03/_en_convert_8c_source.html#l00003">bool::ToString()</a>, <a class="el" href="../../d0/d03/_en_convert_8c.html#afa7657e4f6687b78bc860ddff41c3bef">ToString()</a>, and <a class="el" href="../../d4/d0c/_json_data_contaminated_area_8c_source.html#l00011">Type</a>.</p>

</div>
</div>
<a id="a52d6672843d29dbfc54e35e918733eec" name="a52d6672843d29dbfc54e35e918733eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52d6672843d29dbfc54e35e918733eec">&#9670;&#160;</a></span>ProcessLocalTransition()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ProcessLocalTransition </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d01/class_f_s_m_transition.html">FSMTransition</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>t</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00039">39</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   40</span>  {</div>
<div class="line"><span class="lineno">   41</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] (local) state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState.ToString() + <span class="stringliteral">&quot;-------- event=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.ToString() + <span class="stringliteral">&quot;[G=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_guard.ToString() + <span class="stringliteral">&quot;]/A=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_action.ToString() + <span class="stringliteral">&quot; --------|&gt; dst=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState.ToString());</div>
<div class="line"><span class="lineno">   42</span> </div>
<div class="line"><span class="lineno">   43</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_action)</div>
<div class="line"><span class="lineno">   44</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_action.Action(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// 2) execute transition action (if any)</span></div>
<div class="line"><span class="lineno">   45</span> </div>
<div class="line"><span class="lineno">   46</span>    <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState; <span class="comment">// 3) change state to new</span></div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState != <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>)</div>
<div class="line"><span class="lineno">   49</span>    {</div>
<div class="line"><span class="lineno">   50</span>      <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnEntry(<a class="code hl_class" href="../../db/d06/class_param3.html">e</a>); <span class="comment">// 4a) call onEntry on new state</span></div>
<div class="line"><span class="lineno">   51</span> </div>
<div class="line"><span class="lineno">   52</span>      <span class="keywordflow">if</span> (GetOwnerState())</div>
<div class="line"><span class="lineno">   53</span>        GetOwnerState().OnSubMachineChanged(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState, <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState); <span class="comment">// 5a) notify owner state about change in submachine</span></div>
<div class="line"><span class="lineno">   54</span> </div>
<div class="line"><span class="lineno">   55</span>      <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>)</div>
<div class="line"><span class="lineno">   56</span>        <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>.OnStateChanged(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState, <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_dstState); <span class="comment">// 5b) notify current state about change in machine</span></div>
<div class="line"><span class="lineno">   57</span> </div>
<div class="line"><span class="lineno">   58</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">   59</span>      <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_OK;</div>
<div class="line"><span class="lineno">   60</span>    }</div>
<div class="line"><span class="lineno">   61</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">   62</span>    {</div>
<div class="line"><span class="lineno">   63</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a8e070df24bcb6afaf456af7ba270294a">IsInventoryHFSMLogEnable</a>()) <a class="code hl_function" href="../../d4/d09/_h_f_s_m_base_8c.html#a8d311d98f081cd5719e56b2814d7bb85">fsmDebugPrint</a>(<span class="stringliteral">&quot;[hfsm] terminating fsm: state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState.ToString() + <span class="stringliteral">&quot; event=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>.ToString());</div>
<div class="line"><span class="lineno">   64</span> </div>
<div class="line"><span class="lineno">   65</span>      <span class="keywordflow">if</span> (GetOwnerState())</div>
<div class="line"><span class="lineno">   66</span>        GetOwnerState().OnSubMachineChanged(<a class="code hl_class" href="../../db/d06/class_param3.html">t</a>.m_srcState, <a class="code hl_class" href="../../db/d06/class_param3.html">NULL</a>); <span class="comment">// 5) notify owner state about change in submachine</span></div>
<div class="line"><span class="lineno">   67</span>      <a class="code hl_function" href="#ae7d3938684ce733ea27a97ab89ef2ed9">ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">   68</span>      <span class="keywordflow">return</span> <a class="code hl_enumeration" href="../../da/d01/_f_s_m_base_8c.html#a09f6ec45b8f9309647a7b1eb893bc29f">ProcessEventResult</a>.FSM_TERMINATED; <span class="comment">// 4b) or terminate</span></div>
<div class="line"><span class="lineno">   69</span>    }</div>
<div class="line"><span class="lineno">   70</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d4/d09/_h_f_s_m_base_8c_source.html#l00001">fsmDebugPrint()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00749">LogManager::IsInventoryHFSMLogEnable()</a>, and <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>.</p>

</div>
</div>
<a id="a4cc92ee3a6b6a9da47f97db5d337aa5f" name="a4cc92ee3a6b6a9da47f97db5d337aa5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cc92ee3a6b6a9da47f97db5d337aa5f">&#9670;&#160;</a></span>RandomizeFSMState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::RandomizeFSMState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>hasBullet</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>hasMagazine</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>isJammed</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Deprecated, use RandomizeFSMStateEx for better results. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00699">699</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  700</span>  {</div>
<div class="line"><span class="lineno">  701</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">array&lt;MuzzleState&gt;</a> <a class="code hl_class" href="../../db/d06/class_param3.html">muzzleStates</a>;</div>
<div class="line"><span class="lineno">  702</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">hasBullet</a>)</div>
<div class="line"><span class="lineno">  703</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">muzzleStates</a> = { <a class="code hl_enumeration" href="../../d8/d0f/_weapon_stable_state_8c.html#a81850a19579d69fbd62d39a8f08a5f38">MuzzleState</a>.L };</div>
<div class="line"><span class="lineno">  704</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  705</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">muzzleStates</a> = { <a class="code hl_enumeration" href="../../d8/d0f/_weapon_stable_state_8c.html#a81850a19579d69fbd62d39a8f08a5f38">MuzzleState</a>.E };</div>
<div class="line"><span class="lineno">  706</span> </div>
<div class="line"><span class="lineno">  707</span>    <a class="code hl_function" href="#a2177109633c4bb7835df46abf888c610">RandomizeFSMStateEx</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">muzzleStates</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">hasMagazine</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">isJammed</a>);</div>
<div class="line"><span class="lineno">  708</span>  }</div>
<div class="ttc" id="a_weapon_stable_state_8c_html_a81850a19579d69fbd62d39a8f08a5f38"><div class="ttname"><a href="../../d8/d0f/_weapon_stable_state_8c.html#a81850a19579d69fbd62d39a8f08a5f38">MuzzleState</a></div><div class="ttdeci">MuzzleState</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d0f/_weapon_stable_state_8c_source.html#l00014">WeaponStableState.c:15</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a2177109633c4bb7835df46abf888c610"><div class="ttname"><a href="#a2177109633c4bb7835df46abf888c610">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::RandomizeFSMStateEx</a></div><div class="ttdeci">void RandomizeFSMStateEx(array&lt; MuzzleState &gt; muzzleStates, bool hasMagazine, bool isJammed)</div><div class="ttdoc">With the parameters given, selects a random suitable state for the FSM of the weapon @NOTE: It is bet...</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00715">WeaponFSM.c:715</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2177109633c4bb7835df46abf888c610" name="a2177109633c4bb7835df46abf888c610"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2177109633c4bb7835df46abf888c610">&#9670;&#160;</a></span>RandomizeFSMStateEx()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::RandomizeFSMStateEx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d01/classarray.html">array</a>&lt; <a class="el" href="../../d8/d0f/_weapon_stable_state_8c.html#a81850a19579d69fbd62d39a8f08a5f38">MuzzleState</a> &gt;</td>          <td class="paramname"><span class="paramname"><em>muzzleStates</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>hasMagazine</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>isJammed</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>With the parameters given, selects a random suitable state for the FSM of the weapon @NOTE: It is better to use Weapon_Base.RandomizeFSMState instead of calling this one @WARNING: Weapon_Base.Synchronize call might be needed, if this method is called while clients are connected. </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00715">715</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  716</span>  {</div>
<div class="line"><span class="lineno">  717</span>    <a class="code hl_class" href="../../db/d06/class_param3.html">array&lt;WeaponStableState&gt;</a> <a class="code hl_class" href="../../db/d06/class_param3.html">candidates</a> = <span class="keyword">new</span> <a class="code hl_class" href="../../db/d06/class_param3.html">array&lt;WeaponStableState&gt;</a>;</div>
<div class="line"><span class="lineno">  718</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">tc</a> = m_Transitions.Count();</div>
<div class="line"><span class="lineno">  719</span>    <span class="keywordflow">foreach</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">WeaponTransition</a> <a class="code hl_class" href="../../db/d06/class_param3.html">trans</a> : m_Transitions)</div>
<div class="line"><span class="lineno">  720</span>    {</div>
<div class="line"><span class="lineno">  721</span>      <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>.Cast(<a class="code hl_class" href="../../db/d06/class_param3.html">trans</a>.m_srcState);</div>
<div class="line"><span class="lineno">  722</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a> &amp;&amp; <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.HasMagazine() == <a class="code hl_class" href="../../db/d06/class_param3.html">hasMagazine</a> &amp;&amp; <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsJammed() == <a class="code hl_class" href="../../db/d06/class_param3.html">isJammed</a>)</div>
<div class="line"><span class="lineno">  723</span>      {</div>
<div class="line"><span class="lineno">  724</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.IsSingleState())</div>
<div class="line"><span class="lineno">  725</span>        {</div>
<div class="line"><span class="lineno">  726</span>          <span class="comment">// There is only one, insert it and stop</span></div>
<div class="line"><span class="lineno">  727</span>          <a class="code hl_class" href="../../db/d06/class_param3.html">candidates</a>.Insert(<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  728</span>          <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  729</span>        }</div>
<div class="line"><span class="lineno">  730</span> </div>
<div class="line"><span class="lineno">  731</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">muzzleStates</a>.Count();</div>
<div class="line"><span class="lineno">  732</span>        <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzlesState</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetMuzzleStateCount();</div>
<div class="line"><span class="lineno">  733</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a> != <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzlesState</a>)</div>
<div class="line"><span class="lineno">  734</span>        {</div>
<div class="line"><span class="lineno">  735</span>          <a class="code hl_variable" href="../../d6/d0e/group___debug_shape.html#ga30f13400906443efe9fb79540dc674b5">ErrorEx</a>(<span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;Number of muzzles on the weapon (%1) does not correspond with what state has configured (%2).&quot;</span>, <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzlesState</a>));</div>
<div class="line"><span class="lineno">  736</span>          <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  737</span>        }</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span>        <span class="keywordtype">bool</span> <a class="code hl_class" href="../../db/d06/class_param3.html">equal</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  740</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> = 0; <a class="code hl_class" href="../../db/d06/class_param3.html">i</a> &lt; <a class="code hl_class" href="../../db/d06/class_param3.html">nMuzzles</a>; ++<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>)</div>
<div class="line"><span class="lineno">  741</span>        {</div>
<div class="line"><span class="lineno">  742</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">muzzleStates</a>[<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>] != <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetMuzzleState(<a class="code hl_class" href="../../db/d06/class_param3.html">i</a>))</div>
<div class="line"><span class="lineno">  743</span>          {</div>
<div class="line"><span class="lineno">  744</span>            <a class="code hl_class" href="../../db/d06/class_param3.html">equal</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  745</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  746</span>          }</div>
<div class="line"><span class="lineno">  747</span>        }</div>
<div class="line"><span class="lineno">  748</span> </div>
<div class="line"><span class="lineno">  749</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">equal</a>)</div>
<div class="line"><span class="lineno">  750</span>          <a class="code hl_class" href="../../db/d06/class_param3.html">candidates</a>.Insert(<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  751</span>      }</div>
<div class="line"><span class="lineno">  752</span>    }</div>
<div class="line"><span class="lineno">  753</span> </div>
<div class="line"><span class="lineno">  754</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">cc</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">candidates</a>.Count();</div>
<div class="line"><span class="lineno">  755</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">cc</a>)</div>
<div class="line"><span class="lineno">  756</span>    {</div>
<div class="line"><span class="lineno">  757</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">randomIndex</a> = <a class="code hl_class" href="../../d4/d04/class_math.html">Math</a>.<a class="code hl_function" href="../../d5/d08/group___math.html#gac34f9f8daa0e311b6a6b40cc21d38226">RandomInt</a>(0, <a class="code hl_class" href="../../db/d06/class_param3.html">cc</a>);</div>
<div class="line"><span class="lineno">  758</span>      <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">selected</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">candidates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">randomIndex</a>);</div>
<div class="line"><span class="lineno">  759</span>      Terminate();</div>
<div class="line"><span class="lineno">  760</span>      <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">selected</a>;</div>
<div class="line"><span class="lineno">  761</span>      <span class="keywordflow">if</span> (!<a class="code hl_function" href="#a47c5052caf7a6925483e8748a3503a07">Internal_ValidateAndRepair</a>())</div>
<div class="line"><span class="lineno">  762</span>        <a class="code hl_function" href="../../d5/d0d/_effect_8c.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  763</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] RandomizeFSMState - randomized current state=&quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">selected</a>.GetCurrentStateID());</div>
<div class="line"><span class="lineno">  764</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">selected</a>.SyncAnimState();</div>
<div class="line"><span class="lineno">  765</span>    }</div>
<div class="line"><span class="lineno">  766</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  767</span>    {</div>
<div class="line"><span class="lineno">  768</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] RandomizeFSMState - warning - cannot randomize, no states available&quot;</span>);</div>
<div class="line"><span class="lineno">  769</span>    }</div>
<div class="line"><span class="lineno">  770</span>  }</div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a47c5052caf7a6925483e8748a3503a07"><div class="ttname"><a href="#a47c5052caf7a6925483e8748a3503a07">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::Internal_ValidateAndRepair</a></div><div class="ttdeci">bool Internal_ValidateAndRepair()</div><div class="ttdoc">validate the state of the gun and repair if mismatch</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00462">WeaponFSM.c:462</a></div></div>
<div class="ttc" id="aclass_math_html"><div class="ttname"><a href="../../d4/d04/class_math.html">Math</a></div><div class="ttdef"><b>Definition</b> <a href="../../da/d04/_en_math_8c_source.html#l00006">EnMath.c:7</a></div></div>
<div class="ttc" id="agroup___debug_shape_html_ga30f13400906443efe9fb79540dc674b5"><div class="ttname"><a href="../../d6/d0e/group___debug_shape.html#ga30f13400906443efe9fb79540dc674b5">ErrorEx</a></div><div class="ttdeci">enum ShapeType ErrorEx</div></div>
<div class="ttc" id="agroup___math_html_gac34f9f8daa0e311b6a6b40cc21d38226"><div class="ttname"><a href="../../d5/d08/group___math.html#gac34f9f8daa0e311b6a6b40cc21d38226">Math::RandomInt</a></div><div class="ttdeci">static proto int RandomInt(int min, int max)</div><div class="ttdoc">Returns a random int number between and min [inclusive] and max [exclusive].</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d6/d0e/group___debug_shape.html#ga30f13400906443efe9fb79540dc674b5">ErrorEx</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, <a class="el" href="../../d5/d08/group___math.html#gac34f9f8daa0e311b6a6b40cc21d38226">Math::RandomInt()</a>, <a class="el" href="../../d5/d0d/_effect_8c_source.html#l00149">Start()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">wpnDebugPrint()</a>.</p>

</div>
</div>
<a id="a547396c4dcbe758656386371d79b4163" name="a547396c4dcbe758656386371d79b4163"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a547396c4dcbe758656386371d79b4163">&#9670;&#160;</a></span>SaveCurrentFSMState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::SaveCurrentFSMState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>save current state of fsm </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00400">400</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  401</span>  {</div>
<div class="line"><span class="lineno">  402</span>    <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = GetCurrentState();</div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetInternalStateID();</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentFSMState - saving current state=&quot;</span> + GetCurrentState() + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>    <span class="keywordflow">if</span> (!<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>.Write(<a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>))</div>
<div class="line"><span class="lineno">  407</span>    {</div>
<div class="line"><span class="lineno">  408</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentFSMState - cannot save curr_state_id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  409</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  410</span>    }</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>    <span class="comment">// write only current state</span></div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">if</span> (!<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.SaveCurrentFSMState(<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>))</div>
<div class="line"><span class="lineno">  414</span>    {</div>
<div class="line"><span class="lineno">  415</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentFSMState - cannot save currrent state=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  416</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  417</span>    }</div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  419</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">wpnDebugPrint()</a>.</p>

</div>
</div>
<a id="a2b9c22cee987009d8b509d91d72371a1" name="a2b9c22cee987009d8b509d91d72371a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b9c22cee987009d8b509d91d72371a1">&#9670;&#160;</a></span>SaveCurrentUnstableFSMState()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::SaveCurrentUnstableFSMState </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d8/d08/gameplay_8c.html#af1d1033fca2ebd02f4ba61051b6341c4">ParamsWriteContext</a></td>          <td class="paramname"><span class="paramname"><em>ctx</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00421">421</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  422</span>  {</div>
<div class="line"><span class="lineno">  423</span>    <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = GetCurrentState();</div>
<div class="line"><span class="lineno">  424</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetInternalStateID();</div>
<div class="line"><span class="lineno">  425</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentUnstableFSMState - saving current state=&quot;</span> + GetCurrentState() + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>    <span class="keywordflow">if</span> (!<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>.Write(<a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>))</div>
<div class="line"><span class="lineno">  428</span>    {</div>
<div class="line"><span class="lineno">  429</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentFSMState - cannot save curr_state_id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">curr_state_id</a>);</div>
<div class="line"><span class="lineno">  430</span>      <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  431</span>    }</div>
<div class="line"><span class="lineno">  432</span> </div>
<div class="line"><span class="lineno">  433</span>    <span class="comment">// write all substates</span></div>
<div class="line"><span class="lineno">  434</span>    <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> = <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Count();</div>
<div class="line"><span class="lineno">  435</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> = 0; <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> &lt; <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a>; ++<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>)</div>
<div class="line"><span class="lineno">  436</span>    {</div>
<div class="line"><span class="lineno">  437</span>      <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">state_id</a> = <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>).GetInternalStateID();</div>
<div class="line"><span class="lineno">  438</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state_id</a> != -1)</div>
<div class="line"><span class="lineno">  439</span>      {</div>
<div class="line"><span class="lineno">  440</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#acea538bf7a4dc05b05c22218a83bee44">wpnDebugSpam</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentUnstableFSMState &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> + <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> + <span class="stringliteral">&quot; id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state_id</a> + <span class="stringliteral">&quot; name=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>));</div>
<div class="line"><span class="lineno">  441</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>).SaveCurrentFSMState(<a class="code hl_class" href="../../db/d06/class_param3.html">ctx</a>))</div>
<div class="line"><span class="lineno">  442</span>          <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;SaveCurrentUnstableFSMState - cannot save unique state=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>) + <span class="stringliteral">&quot; idx=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">idx</a> + <span class="stringliteral">&quot;/&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state_count</a> + <span class="stringliteral">&quot; with id=&quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">state_id</a>);</div>
<div class="line"><span class="lineno">  443</span>      }</div>
<div class="line"><span class="lineno">  444</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  445</span>        <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="stringliteral">&quot;[wpnfsm] SaveCurrentUnstableFSMState state=&quot;</span> + <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Get(<a class="code hl_class" href="../../db/d06/class_param3.html">idx</a>) + <span class="stringliteral">&quot; with unassigned ID!&quot;</span>);</div>
<div class="line"><span class="lineno">  446</span>    }</div>
<div class="line"><span class="lineno">  447</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  448</span>  }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">wpnDebugPrint()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00017">wpnDebugSpam()</a>.</p>

</div>
</div>
<a id="a6acb1bf76b6f43ce6107ab7b374c1ea3" name="a6acb1bf76b6f43ce6107ab7b374c1ea3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6acb1bf76b6f43ce6107ab7b374c1ea3">&#9670;&#160;</a></span>SetInternalID()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">void</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::SetInternalID </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a></td>          <td class="paramname"><span class="paramname"><em>state</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>unique list of states in this machine (automation of save/load) </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00015">15</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">   16</span>  {</div>
<div class="line"><span class="lineno">   17</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">state</a> &amp;&amp; <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.GetInternalStateID() == -1)</div>
<div class="line"><span class="lineno">   18</span>    {</div>
<div class="line"><span class="lineno">   19</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.SetInternalStateID(<a class="code hl_variable" href="#a27f73d750f0d2ef2e6d628097dfd3a6b">m_NextStateId</a>);</div>
<div class="line"><span class="lineno">   20</span> </div>
<div class="line"><span class="lineno">   21</span>      <span class="comment">//if (LogManager.IsWeaponLogEnable()) { wpnDebugSpam(&quot;[wpnfsm] &quot; + Object.GetDebugName(m_weapon) + &quot; unique state=&quot; + state + &quot; has id=&quot; + m_NextStateId); }</span></div>
<div class="line"><span class="lineno">   22</span>      <a class="code hl_variable" href="#aa545d21e1530fd56d60cbf59ec2ce77f">m_UniqueStates</a>.Insert(<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">   23</span>      ++<a class="code hl_variable" href="#a27f73d750f0d2ef2e6d628097dfd3a6b">m_NextStateId</a>;</div>
<div class="line"><span class="lineno">   24</span>    }</div>
<div class="line"><span class="lineno">   25</span>  }</div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a27f73d750f0d2ef2e6d628097dfd3a6b"><div class="ttname"><a href="#a27f73d750f0d2ef2e6d628097dfd3a6b">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::m_NextStateId</a></div><div class="ttdeci">int m_NextStateId</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00012">WeaponFSM.c:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7d3938684ce733ea27a97ab89ef2ed9" name="ae7d3938684ce733ea27a97ab89ef2ed9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7d3938684ce733ea27a97ab89ef2ed9">&#9670;&#160;</a></span>ValidateAndRepair()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ValidateAndRepair </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>validate the state of the gun and repair if mismatch </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00453">453</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  454</span>  {</div>
<div class="line"><span class="lineno">  455</span>    <a class="code hl_function" href="#a47c5052caf7a6925483e8748a3503a07">Internal_ValidateAndRepair</a>();</div>
<div class="line"><span class="lineno">  456</span>  }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a5c87ce381136bf52b4bb20e3d7b7ba" name="a8a5c87ce381136bf52b4bb20e3d7b7ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a5c87ce381136bf52b4bb20e3d7b7ba">&#9670;&#160;</a></span>ValidateAndRepairHelper()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d09/classbool.html">bool</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ValidateAndRepairHelper </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d0c/class_weapon___base.html">Weapon_Base</a></td>          <td class="paramname"><span class="paramname"><em>weapon</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d02/classstring.html">string</a></td>          <td class="paramname"><span class="paramname"><em>name</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>stateCondition</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>gunCondition</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e1</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e2</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d06/class_param3.html">out</a> <a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a></td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00533">533</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  534</span>  {</div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.GetDebugName(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>) + <span class="stringliteral">&quot; ValidateAndRepair - &quot;</span> + <a class="code hl_variable" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a> + <span class="stringliteral">&quot; - &quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> + <span class="stringliteral">&quot; - state: &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">stateCondition</a> + <span class="stringliteral">&quot; &amp; weapon: &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">gunCondition</a>);</div>
<div class="line"><span class="lineno">  536</span> </div>
<div class="line"><span class="lineno">  537</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">stateCondition</a> != <a class="code hl_class" href="../../db/d06/class_param3.html">gunCondition</a>)</div>
<div class="line"><span class="lineno">  538</span>    {</div>
<div class="line"><span class="lineno">  539</span>      <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="code hl_class" href="../../db/d06/class_param3.html">repairedState</a>;</div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>      <span class="comment">// Seeing this message is not TOO bad, it just means this system is working</span></div>
<div class="line"><span class="lineno">  542</span>      <span class="comment">// It is simply being listed in the logs to identify how much the FSM state and weapon state still desyncs</span></div>
<div class="line"><span class="lineno">  543</span>      <span class="comment">// Which can be because of a myriad of causes, such as incorrectly set up transitions</span></div>
<div class="line"><span class="lineno">  544</span>      <span class="comment">// Or simply certain timings of certain actions or interrupts lined up perfectly, which can have repro rates such as 1/300</span></div>
<div class="line"><span class="lineno">  545</span>      <a class="code hl_function" href="../../d0/d02/group___debug.html#ga786b160dafbe15abb829786ba345cb15">Error</a>(<span class="keywordtype">string</span>.Format(<span class="stringliteral">&quot;[wpnfsm] ValidateAndRepair Attempting to repair: %1 - %2 - %3 - state: %4 != weapon: %5&quot;</span>,</div>
<div class="line"><span class="lineno">  546</span>                          <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.GetDebugName(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>), <a class="code hl_variable" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>, <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">stateCondition</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">gunCondition</a>));</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">e1</a> &amp;&amp; <a class="code hl_class" href="../../db/d06/class_param3.html">e2</a>)</div>
<div class="line"><span class="lineno">  549</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">repairedState</a> = <a class="code hl_function" href="#ae41ad037a9208e7839ddf051a82a8fd9">ValidateAndRepairStateFinder</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">gunCondition</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e1</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e2</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>);</div>
<div class="line"><span class="lineno">  550</span> </div>
<div class="line"><span class="lineno">  551</span>      <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">repairedState</a>)</div>
<div class="line"><span class="lineno">  552</span>      {</div>
<div class="line"><span class="lineno">  553</span>        Terminate();</div>
<div class="line"><span class="lineno">  554</span>        <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">repairedState</a>;</div>
<div class="line"><span class="lineno">  555</span>        <a class="code hl_function" href="../../d5/d0d/_effect_8c.html#a07aaf1227e4d645f15e0a964f54ef291">Start</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">null</a>, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  556</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">state</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">repairedState</a>;</div>
<div class="line"><span class="lineno">  557</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.SyncSelectionState(<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.HasBullet(), <a class="code hl_class" href="../../db/d06/class_param3.html">state</a>.HasMagazine());</div>
<div class="line"><span class="lineno">  558</span>        <a class="code hl_class" href="../../db/d06/class_param3.html">repairedState</a>.SyncAnimState();</div>
<div class="line"><span class="lineno">  559</span> </div>
<div class="line"><span class="lineno">  560</span>        <span class="keywordflow">if</span> (<a class="code hl_class" href="../../d9/d07/class_log_manager.html">LogManager</a>.<a class="code hl_function" href="../../d9/d07/class_log_manager.html#a1936dba0ee4da1a581859d6603178326">IsWeaponLogEnable</a>()) <a class="code hl_function" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c.html#afa33033805ea8cbc9b91ae2d002ffcd7">wpnDebugPrint</a>(<span class="stringliteral">&quot;[wpnfsm] &quot;</span> + <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.GetDebugName(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>) + <span class="stringliteral">&quot; ValidateAndRepair - &quot;</span> + <a class="code hl_variable" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a> + <span class="stringliteral">&quot; - Result - &quot;</span> + <a class="code hl_variable" href="../../d5/d0b/_stamina_handler_8c.html#aa2b21fd783d214e968db4f6522998563">m_State</a>);</div>
<div class="line"><span class="lineno">  561</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  562</span>      }</div>
<div class="line"><span class="lineno">  563</span>      <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  564</span>      {</div>
<div class="line"><span class="lineno">  565</span>        <span class="comment">// Last ditch effort</span></div>
<div class="line"><span class="lineno">  566</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="#ac7732a0b7502ad6de0acea045eb4c605">m_SynchronizeAttempts</a> &lt; <a class="code hl_variable" href="#a8b4baa2feb57c1599804218c2fc698b9">MAX_SYNCHRONIZE_ATTEMPTS</a>)</div>
<div class="line"><span class="lineno">  567</span>        {</div>
<div class="line"><span class="lineno">  568</span>          <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">currentTime</a> = <a class="code hl_variable" href="../../d8/d08/_day_z_game_8c.html#a5b4f7935d7cbb89f7a4610452d633707">g_Game</a>.GetTime();</div>
<div class="line"><span class="lineno">  569</span>          <span class="keywordtype">int</span> <a class="code hl_class" href="../../db/d06/class_param3.html">timeDiff</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">currentTime</a> - <a class="code hl_variable" href="#a6a0e1d8638db7e25eb712aaaed324463">m_LastSynchronizeTime</a>;</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>          <span class="comment">// Careful with calling synchronize</span></div>
<div class="line"><span class="lineno">  572</span>          <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">timeDiff</a> &gt; <a class="code hl_variable" href="#a05ce2ff1798586ff4772c0deb8697525">MIN_SYNCHRONIZE_INTERVAL</a>)</div>
<div class="line"><span class="lineno">  573</span>          {</div>
<div class="line"><span class="lineno">  574</span>            <span class="comment">// If a lot of time passed since last attempt</span></div>
<div class="line"><span class="lineno">  575</span>            <span class="comment">// There is a possibility the weapon was fixed for a period</span></div>
<div class="line"><span class="lineno">  576</span>            <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">timeDiff</a> &gt; <a class="code hl_variable" href="#a87f53f255701e754e4cfd7a1be6e6341">RESET_SYNCHRONIZE_THRESHOLD</a>)</div>
<div class="line"><span class="lineno">  577</span>              <a class="code hl_variable" href="#ac7732a0b7502ad6de0acea045eb4c605">m_SynchronizeAttempts</a> = 0;</div>
<div class="line"><span class="lineno">  578</span> </div>
<div class="line"><span class="lineno">  579</span>            <span class="comment">// Only call this on server or in SP</span></div>
<div class="line"><span class="lineno">  580</span>            <span class="comment">// Synchronize will ask the server for its FSM state anyways</span></div>
<div class="line"><span class="lineno">  581</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d8/d08/_day_z_game_8c.html#a5b4f7935d7cbb89f7a4610452d633707">g_Game</a>.IsServer())</div>
<div class="line"><span class="lineno">  582</span>              <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.RandomizeFSMState();</div>
<div class="line"><span class="lineno">  583</span> </div>
<div class="line"><span class="lineno">  584</span>            <a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>.Synchronize();</div>
<div class="line"><span class="lineno">  585</span> </div>
<div class="line"><span class="lineno">  586</span>            ++<a class="code hl_variable" href="#ac7732a0b7502ad6de0acea045eb4c605">m_SynchronizeAttempts</a>;</div>
<div class="line"><span class="lineno">  587</span>            <a class="code hl_variable" href="#a6a0e1d8638db7e25eb712aaaed324463">m_LastSynchronizeTime</a> = <a class="code hl_class" href="../../db/d06/class_param3.html">currentTime</a>;</div>
<div class="line"><span class="lineno">  588</span>          }</div>
<div class="line"><span class="lineno">  589</span>        }</div>
<div class="line"><span class="lineno">  590</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  591</span>          <a class="code hl_function" href="#a1e063b90cbfec70349d96917f43951e5">OnFailThresholdBreached</a>(<a class="code hl_class" href="../../db/d06/class_param3.html">weapon</a>, <a class="code hl_variable" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">stateCondition</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">gunCondition</a>);</div>
<div class="line"><span class="lineno">  592</span>      }</div>
<div class="line"><span class="lineno">  593</span>    }</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  596</span>  }</div>
<div class="ttc" id="a_day_z_game_8c_html_a5b4f7935d7cbb89f7a4610452d633707"><div class="ttname"><a href="../../d8/d08/_day_z_game_8c.html#a5b4f7935d7cbb89f7a4610452d633707">g_Game</a></div><div class="ttdeci">DayZGame g_Game</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d08/_day_z_game_8c_source.html#l03528">DayZGame.c:3528</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a05ce2ff1798586ff4772c0deb8697525"><div class="ttname"><a href="#a05ce2ff1798586ff4772c0deb8697525">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::MIN_SYNCHRONIZE_INTERVAL</a></div><div class="ttdeci">static const int MIN_SYNCHRONIZE_INTERVAL</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00007">WeaponFSM.c:7</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a1e063b90cbfec70349d96917f43951e5"><div class="ttname"><a href="#a1e063b90cbfec70349d96917f43951e5">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::OnFailThresholdBreached</a></div><div class="ttdeci">void OnFailThresholdBreached(Weapon weapon, string name, bool stateCondition, bool gunCondition)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00598">WeaponFSM.c:598</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a6a0e1d8638db7e25eb712aaaed324463"><div class="ttname"><a href="#a6a0e1d8638db7e25eb712aaaed324463">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::m_LastSynchronizeTime</a></div><div class="ttdeci">int m_LastSynchronizeTime</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00010">WeaponFSM.c:10</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a87f53f255701e754e4cfd7a1be6e6341"><div class="ttname"><a href="#a87f53f255701e754e4cfd7a1be6e6341">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::RESET_SYNCHRONIZE_THRESHOLD</a></div><div class="ttdeci">static const int RESET_SYNCHRONIZE_THRESHOLD</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00008">WeaponFSM.c:8</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_a8b4baa2feb57c1599804218c2fc698b9"><div class="ttname"><a href="#a8b4baa2feb57c1599804218c2fc698b9">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::MAX_SYNCHRONIZE_ATTEMPTS</a></div><div class="ttdeci">static const int MAX_SYNCHRONIZE_ATTEMPTS</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00006">WeaponFSM.c:6</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_ac7732a0b7502ad6de0acea045eb4c605"><div class="ttname"><a href="#ac7732a0b7502ad6de0acea045eb4c605">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::m_SynchronizeAttempts</a></div><div class="ttdeci">int m_SynchronizeAttempts</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00009">WeaponFSM.c:9</a></div></div>
<div class="ttc" id="aclass_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4_html_ae41ad037a9208e7839ddf051a82a8fd9"><div class="ttname"><a href="#ae41ad037a9208e7839ddf051a82a8fd9">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;::ValidateAndRepairStateFinder</a></div><div class="ttdeci">WeaponStableState ValidateAndRepairStateFinder(bool condition, WeaponEventBase e1, WeaponEventBase e2, WeaponStableState state)</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00610">WeaponFSM.c:610</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d3/d09/_en_debug_8c_source.html#l00090">Error()</a>, <a class="el" href="../../d8/d08/_day_z_game_8c_source.html#l03528">g_Game</a>, <a class="el" href="../../de/d0c/3___game_2tools_2_debug_8c_source.html#l00799">LogManager::IsWeaponLogEnable()</a>, <a class="el" href="../../d5/d0b/_stamina_handler_8c_source.html#l00020">m_State</a>, <a class="el" href="../../d0/d04/_cfg_player_spawn_data_json_8c.html#ad8c6fb88ec9295d5e3b3c7ad4854b647">name</a>, <a class="el" href="../../d5/d0d/_effect_8c_source.html#l00149">Start()</a>, and <a class="el" href="../../dc/d0d/4___world_2_entities_2_firearms_2_debug_8c_source.html#l00009">wpnDebugPrint()</a>.</p>

</div>
</div>
<a id="ae41ad037a9208e7839ddf051a82a8fd9" name="ae41ad037a9208e7839ddf051a82a8fd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae41ad037a9208e7839ddf051a82a8fd9">&#9670;&#160;</a></span>ValidateAndRepairStateFinder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::ValidateAndRepairStateFinder </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d09/classbool.html">bool</a></td>          <td class="paramname"><span class="paramname"><em>condition</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e1</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></td>          <td class="paramname"><span class="paramname"><em>e2</em>, </span></td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a></td>          <td class="paramname"><span class="paramname"><em>state</em></span>&#160;)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00610">610</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  611</span>  {</div>
<div class="line"><span class="lineno">  612</span>    <a class="code hl_class" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">interState</a>;</div>
<div class="line"><span class="lineno">  613</span>    <span class="keywordflow">if</span> (<a class="code hl_class" href="../../db/d06/class_param3.html">condition</a>)</div>
<div class="line"><span class="lineno">  614</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">interState</a> = FindTransitionState(<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e1</a>);</div>
<div class="line"><span class="lineno">  615</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  616</span>      <a class="code hl_class" href="../../db/d06/class_param3.html">interState</a> = FindTransitionState(<a class="code hl_class" href="../../db/d06/class_param3.html">state</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e2</a>);</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>    <a class="code hl_class" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a> <a class="code hl_class" href="../../db/d06/class_param3.html">e</a> = <span class="keyword">new</span> WeaponEventHumanCommandActionFinished;</div>
<div class="line"><span class="lineno">  619</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../dc/d0c/class_weapon_stable_state.html">WeaponStableState</a>.Cast(FindGuardedTransitionState(<a class="code hl_class" href="../../db/d06/class_param3.html">interState</a>, <a class="code hl_class" href="../../db/d06/class_param3.html">e</a>));</div>
<div class="line"><span class="lineno">  620</span>  }</div>
<div class="ttc" id="aclass_weapon_event_base_html"><div class="ttname"><a href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a></div><div class="ttdoc">signalize mechanism manipulation</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d0a/_events_8c_source.html#l00034">Events.c:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6a0e1d8638db7e25eb712aaaed324463" name="a6a0e1d8638db7e25eb712aaaed324463"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a0e1d8638db7e25eb712aaaed324463">&#9670;&#160;</a></span>m_LastSynchronizeTime</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::m_LastSynchronizeTime</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00010">10</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<a id="a27f73d750f0d2ef2e6d628097dfd3a6b" name="a27f73d750f0d2ef2e6d628097dfd3a6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27f73d750f0d2ef2e6d628097dfd3a6b">&#9670;&#160;</a></span>m_NextStateId</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::m_NextStateId = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00012">12</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<a id="ac7732a0b7502ad6de0acea045eb4c605" name="ac7732a0b7502ad6de0acea045eb4c605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7732a0b7502ad6de0acea045eb4c605">&#9670;&#160;</a></span>m_SynchronizeAttempts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::m_SynchronizeAttempts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00009">9</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<a id="aa545d21e1530fd56d60cbf59ec2ce77f" name="aa545d21e1530fd56d60cbf59ec2ce77f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa545d21e1530fd56d60cbf59ec2ce77f">&#9670;&#160;</a></span>m_UniqueStates</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">ref</a> <a class="el" href="../../d2/d01/classarray.html">array</a>&lt;<a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>&gt; <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::m_UniqueStates = <a class="el" href="../../db/d06/class_param3.html">new</a> <a class="el" href="../../d2/d01/classarray.html">array</a>&lt;<a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>counter for InternalID: each state in a fsm is assigned an unique number </p>

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00013">13</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<a id="a8b4baa2feb57c1599804218c2fc698b9" name="a8b4baa2feb57c1599804218c2fc698b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b4baa2feb57c1599804218c2fc698b9">&#9670;&#160;</a></span>MAX_SYNCHRONIZE_ATTEMPTS</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">const</a> <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::MAX_SYNCHRONIZE_ATTEMPTS = 12</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00006">6</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<a id="a05ce2ff1798586ff4772c0deb8697525" name="a05ce2ff1798586ff4772c0deb8697525"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05ce2ff1798586ff4772c0deb8697525">&#9670;&#160;</a></span>MIN_SYNCHRONIZE_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">const</a> <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::MIN_SYNCHRONIZE_INTERVAL = 3000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00007">7</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<a id="a87f53f255701e754e4cfd7a1be6e6341" name="a87f53f255701e754e4cfd7a1be6e6341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a87f53f255701e754e4cfd7a1be6e6341">&#9670;&#160;</a></span>RESET_SYNCHRONIZE_THRESHOLD</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d06/class_param3.html">const</a> <a class="el" href="../../da/d02/3___game_2_entities_2_entity_a_i_8c.html#a90d3e5de4aff5bb7b00ab0a384150892">int</a> <a class="el" href="../../dd/d03/class_h_f_s_m_base.html">HFSMBase</a>&lt; <a class="el" href="../../d2/d04/class_weapon_state_base.html">WeaponStateBase</a>, <a class="el" href="../../d7/d07/class_weapon_event_base.html">WeaponEventBase</a>, <a class="el" href="../../d3/d0b/class_weapon_action_base.html">WeaponActionBase</a>, <a class="el" href="../../dc/d0f/class_weapon_guard_base.html">WeaponGuardBase</a> &gt;::RESET_SYNCHRONIZE_THRESHOLD = 3600000</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html#l00008">8</a> of file <a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>scripts/4_World/Entities/Firearms/<a class="el" href="../../dd/d09/_weapon_f_s_m_8c_source.html">WeaponFSM.c</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../d2/d05/class_h_f_s_m_base_3_01_weapon_state_base_00_01_weapon_event_base_00_01_weapon_action_base_00_01_weapon_guard_base_01_4.html">HFSMBase&lt; WeaponStateBase, WeaponEventBase, WeaponActionBase, WeaponGuardBase &gt;</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
